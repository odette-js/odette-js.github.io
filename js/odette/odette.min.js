this.Odette=this.Odette||function(n,t,i,e,r){"use strict";function s(n,t){return this.SCOPED=l,this.CREATED_AT=E(),this.VERSION=n,this.application=this,this.missedDefinitions=[],this}var o,u="0.0.0",f="",c="length",a="global",p="prototype",h=".",d=this||window||n,v=d.document,l=!0,g=!1,y=null,O=function(){},V=function(n){return function(t){return typeof t===n}},E=function(){return+new Date},w=function(n,t){for(var i=0,e=n[c],r=[];e>i;)r[i]=t(n[i],i,n),i++;return r},D=V("string"),m=V("number"),S=V("function"),x=E(),R=function(n,t){return function(){return t.apply(n,arguments)}},A=function(n,t,i){var e,r=y;try{e=n()}catch(s){r=s,e=t?t(s):e}finally{e=i?i(r,e):e}return e},T=function(n,t){var i,e,r,s=C(n),u=C(t);return s===l?s:u===l?u:s===g&&u===g?(i=n.split(h),e=t.split(h),w(i,function(n,t){+n<+(e[t]||0)&&(r=l)}),r===o&&e[c]>i[c]&&(r=l),r?t:n):n>t?n:t},C=function(n){var t,i=n;return m(i)?i:(i+=f,t=+i,t===t?t:1===i.split(h)[c])};s[p].destroy=O,s[p].wraptry=A,s[p].now=E,s[p].execute=function(){var n=this[a].lastLoaded;n(this.scope())},s[p].extend=function(n){var t,i=this;for(t in n)n.hasOwnProperty(t)&&(i[t]=n[t]);return i},s[p].undefine=function(n){return this.missedDefinitions.push(n),this.isDefining&&n.apply(this,[this,this.definingAgainst,this.definingWith]),this},s[p].parody=function(n){for(var t=this,i=0,e={},r=t[a];i<n[c];i++)e[n[i]]=R(r,r[n[i]]);return t.extend(e),t},s[p].scope=function(n,t){var i=n&&D(n)?n:this.VERSION,e=n&&(S(n)?n:S(t)?t:y);return this[a].scope(i,e)};var I,N=d[t]=d[t]||function(){return Odette.where.push(t),{EXECUTED_AT:x,WHERE:t,VERSION:u,SHARED:l,SCOPED:g,versionOrder:[],versions:{},wraptry:A,maxVersion:T,registerVersion:function(n,t){var e,r=this,u=r.versions[n],f=r.versions[n]=u||t||new s(n,r);return f[a]=r,r.currentVersion=n,r.defaultVersion=(e=r.defaultVersion)===o?i:T(e,i),u||r.versionOrder.push(n),f},definition:function(n,t,i){var e,r,s=this,o=s.registerVersion(n),u=t.Odette,f=u.options;return f?(r=t||f.context,e=i||{},o.defined?s.map(o.missedDefinitions,function(n){n.apply(o,[o,r,e])}):(o.defined=l,o.isDefining=l,o.definingAgainst=r,o.definingWith=e,f.handler.apply(o,[o,r,e]),o.isDefining=g,delete u.options),o):o},unRegisterVersion:function(n){var t=this,i=t.versions[n],e=t.versionOrder.indexOf(n);return-1===e?t:(i.destroy(),t.versionOrder.splice(e,1),i[a]=o,t.versions[n]=o,i)},scope:function(n,t){var i,e,r,s=this,o=s.versions;return D(n)||m(n)?(i=n,e=t):(e=n,i=s.defaultVersion),o[i]?s.currentVersion=i:s.registerVersion(i),r=o[i],S(e)?(this.wraptry(function(){e.apply(s,[r])}),r):r},map:w,registerScopedMethod:function(n,t){var i=this,e=t||3;i[n]=i[n]||function(){var t=0,r=arguments,s=r,o=r[c],u=r[0];if(e>o)u=i.currentVersion;else{for(s=[];t<r[c];t++)s.push(r[t]);u=s.shift()}i.applyTo(u,n,s)};return i},get:function(n){return this.versions[n]},applyTo:function(n,t,i){var e=this,r=e.get(n);return r&&r[t]&&r[t].apply(r,i)},getCurrentScript:function(n){var t=(n||v).scripts,i=n.currentScript,e=t[t[c]-1];return i||e},touch:function(n,i,e){var r=this,s=r;return A(function(){var n=i.document;return s=i[t]||s,!!n},function(){return g})?(i[t]=s,e||n[t]===s||(n[t]=s,w(r.versionOrder,function(n){s.registerVersion(n,r.versions[n])})),s):void 0}}}();return I=N.get(i),I?r&&r.apply(d,[N,I]):(I=N.registerVersion(i),e.apply(d,[N,I])),I},Odette.where=Odette.where||[],Odette.definition=Odette.definition||function(n,t){this.options={context:n,handler:t}};