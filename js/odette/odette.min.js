this.Odette=this.Odette||function(n,t,e,i,r){"use strict";function s(n,t){return this.SCOPED=l,this.CREATED_AT=V(),this.VERSION=n,this.application=this,this.missedDefinitions=[],this}var o,u="0.0.0",f="",c="length",d="global",h="prototype",a=".",p=this||window||this,v=p.document,l=!0,O=!1,g=null,y=function(){},E=function(n){return function(t){return typeof t===n}},V=function(){return+new Date},w=function(n,t){for(var e=0,i=n[c],r=[];i>e;)r[e]=t(n[e],e,n),e++;return r},R=E("string"),S=E("number"),m=E("function"),D=E("object"),x=V(),A=function(n,t){return function(){return t.apply(n,arguments)}},T=function(n,t,e){var i,r=g;try{i=n()}catch(s){r=s,i=t?t(s):i}finally{i=e?e(r,i):i}return i},C=function(n,t){var e,i,r,s=W(n),u=W(t);return s===l?s:u===l?u:s===O&&u===O?(e=n.split(a),i=t.split(a),w(e,function(n,t){+n<+(i[t]||0)&&(r=l)}),r===o&&i[c]>e[c]&&(r=l),r?t:n):n>t?n:t},W=function(n){var t,e=n;return S(e)?e:(e+=f,t=+e,t===t?t:1===e.split(a)[c])};s[h].destroy=y,s[h].wraptry=T,s[h].now=V,s[h].execute=function(){var n=this[d].lastLoaded;n(this.scope())},s[h].extend=function(n){var t,e=this;for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},s[h].undefine=function(n){return this.missedDefinitions.push(n),this.defining&&n.apply(this,[this,this.definingAgainst,this.definingWith]),this},s[h].parody=function(n){for(var t=this,e=0,i={},r=t[d];e<n[c];e++)i[n[e]]=A(r,r[n[e]]);return t.extend(i),t},s[h].scope=function(n,t){var e=n&&R(n)?n:this.VERSION,i=n&&(m(n)?n:m(t)?t:g);return this[d].scope(e,i)};var H,I=p[t]=p[t]||function(){return Odette.where.push(t),{EXECUTED_AT:x,WHERE:t,VERSION:u,SHARED:l,SCOPED:O,versionOrder:[],versions:{},wraptry:T,maxVersion:C,registerVersion:function(n,t){var i,r=this,u=r.versions[n],f=r.versions[n]=u||t||new s(n,r);return f[d]=r,r.currentVersion=n,r.defaultVersion=(i=r.defaultVersion)===o?e:C(i,e),u||r.versionOrder.push(n),f},definition:function(n,t,e){var i,r,s,o,u,f=this,c=n,d=t,h=e;return D(c)&&(h=d,d=c,c=f.scope().VERSION),i=f.registerVersion(c),r=d.Odette,(s=r.options)?(u=d||s.context,o=h||{},i.defined?f.map(i.missedDefinitions,function(n){n.apply(i,[i,u,o])}):(i.defined=l,i.defining=l,i.definingAgainst=u,i.definingWith=o,s.handler.apply(i,[i,u,o]),i.defining=O,delete r.options),i):i},unRegisterVersion:function(n){var t=this,e=t.versions[n],i=t.versionOrder.indexOf(n);return-1===i?t:(e.destroy(),t.versionOrder.splice(i,1),e[d]=o,t.versions[n]=o,e)},scope:function(n,t){var e,i,r,s=this,o=s.versions;return R(n)||S(n)?(e=n,i=t):(i=n,e=s.defaultVersion),o[e]?s.currentVersion=e:s.registerVersion(e),r=o[e],m(i)?(i.apply(s,[r]),r):r},map:w,registerScopedMethod:function(n,t){var e=this,i=t||3;e[n]=e[n]||function(){var t=0,r=arguments,s=r,o=r[c],u=r[0];if(i>o)u=e.currentVersion;else{for(s=[];t<r[c];t++)s.push(r[t]);u=s.shift()}e.applyTo(u,n,s)};return e},get:function(n){return this.versions[n]},applyTo:function(n,t,e){var i=this,r=i.get(n);return r&&r[t]&&r[t].apply(r,e)},getCurrentScript:function(n){var t=(n||v).scripts,e=n.currentScript,i=t[t[c]-1];return e||i},touch:function(n,e,i){var r=this,s=r;return T(function(){var n=e.document;return s=e[t]||s,!!n},function(){return O})?(e[t]=s,-1===e.Odette.where.indexOf(s.WHERE)&&e.Odette.where.push(s.WHERE),i||n[t]===s||(n[t]=s,w(r.versionOrder,function(n){s.registerVersion(n,r.versions[n])})),s):void 0}}}();return H=I.get(e),H?r&&r.apply(p,[I,H]):(H=I.registerVersion(e),i.apply(p,[I,H])),H},Odette.where=Odette.where||[],Odette.definition=Odette.definition||function(n,t){this.options={context:n,handler:t}};