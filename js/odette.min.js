this.Odette=function(e,t,n,r){"use strict";function i(e,t){return this.version=e,this.scoped=v,this.missedDefinitions=[],this.createdAt=b(),this}var o,u="0.0.0",a="length",s="global",c="prototype",f="touchTop",l="topAccess",d=".",h=this||window||e,p=h.document,v=!0,m=!1,g=null,y=function(){},w=function(e){return function(t){return typeof t===e}},b=function(){return+new Date},x=function(e,t){for(var n=0,r=e[a],i=[];r>n;)i[n]=t(e[n],n,e),n++;return i},A=w("string"),E=w("number"),k=w("function"),T=b(),S=function(e,t){return function(){return t.apply(e,arguments)}},D=function(e,t,n){var r,i=g;try{r=e()}catch(o){i=o,r=t?t(o):r}finally{r=n?n(i,r):r}return r},C=function(e,t){var n,r,i,u=O(e),s=O(t);return u===v?u:s===v?s:u===m&&s===m?(n=e.split(d),r=t.split(d),x(n,function(e,t){+e<+(r[t]||0)&&(i=v)}),i===o&&r[a]>n[a]&&(i=v),i?t:e):e>t?e:t},O=function(e){var t,n=e;return E(n)?n:(n+="",t=+n,t===t?t:1===n.split(d)[a])};i[c].destroy=y,i[c].wraptry=D,i[c].now=b,i[c].extend=function(e){var t,n=this;for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},i[c].undefine=function(e){return this.missedDefinitions.push(e),this},i[c].parody=function(e){for(var t=this,n=0,r={},i=t[s];n<e[a];n++)r[e[n]]=S(i,i[e[n]]);return t.extend(r),t},i[c].scope=function(e,t){var n=e&&A(e)?e:this.version,r=e&&(k(e)?e:k(t)?t:g);return this[s].scope(n,r)},i[c][f]=function(){return this[s][f](h)},i[c][l]=function(){return this[f](),this[s][l]};var M,I=h[t]=h[t]||{versions:{},executionTime:T,versionOrder:[],VERSION:u,shared:v,scoped:m,wraptry:D,maxVersion:C,registerVersion:function(e,t){var r,u=this,a=u.versions[e],c=u.versions[e]=a||t||new i(e,u);return c[s]=u,u.currentVersion=e,u.defaultVersion=(r=u.defaultVersion)===o?n:C(r,n),a||u.versionOrder.push(e),c},definition:function(e,t,n){var r=this,i=r.registerVersion(e);return i.defined?r.map(i.missedDefinitions,function(e){e.call(i,t)}):(i.defined=v,n.call(i,i)),i},unRegisterVersion:function(e){var t=this,n=t.versions[e],r=t.versionOrder.indexOf(e);return-1===r?t:(n.destroy(),t.versionOrder.splice(r,1),n[s]=o,t.versions[e]=o,n)},scope:function(e,t){var n,r,i,o=this,u=o.versions;return A(e)||E(e)?(n=e,r=t):(r=e,n=o.defaultVersion),u[n]?o.currentVersion=n:o.registerVersion(n),i=u[n],k(r)?(this.wraptry(function(){r.call(o,i)}),i):i},map:x,registerScopedMethod:function(e,t){var n=this,r=t||3;n[e]=n[e]||function(){var t=0,i=arguments,o=i,u=i[a],s=i[0];if(r>u)s=n.currentVersion;else{for(o=[];t<i[a];t++)o.push(i[t]);s=o.shift()}n.applyTo(s,e,o)};return n},get:function(e){return this.versions[e]},applyTo:function(e,t,n){var r=this,i=r.get(e);return i&&i[t]&&i[t].apply(i,n)},getCurrentScript:function(e){var t=(e||p).scripts,n=e.currentScript,r=t[t[a]-1];return n||r},touchTop:function(e,n){var r,i=this,u=i;return u[l]===o&&(r=e!==e.top&&e.top?D(function(){e.top.document;return u=e.top[t]||u,v},function(){return m}):v,r&&(e.top[t]=u),u[l]=r),n||e[t]===u||x(i.versionOrder,function(e){u.registerVersion(e,i.versions[e])}),e[t]=u,u}};return(M=I.get(n))?M:(M=I.registerVersion(n),r.call(h,I,M),M)},Odette(this,"application","0.0.0",function(e,t){var n=this;e.touchTop(n)}),application.definition("0.0.0",this,function(e){"use strict";function t(e,t){return this}var n,r=window,i=r.document,o="",u=" ",a="-",s=".",c="/",f="px",l="id",d="destroy",h=_+d,p="destroying",v="toString",m="toJSON",g="prototype",y="constructor",w="current",b="name",x="type",A="selector",E="element",w="current",k="child",T=":",S="none",D="hidden",C="before",O="change",M="target",I="origin",_=C+T,N=O+T,R="reset",j="data",L="parent",d="destroy",P="length",V="object",B="string",H="boolean",q="function",U="indexOf",F="window",W="document",G="stack",z="start",J="stop",Q="class",X="className",Y="top",K="left",Z="right",ee="bottom",te="width",U="indexOf",ne="__elid__",re="height",ie="index",oe="innerHeight",ue="innerWidth",ae="dispatchEvent",se="http",ce=se+"s",fe="__"+y+"__",le="location",de="extend",he="style",pe="body",ve=!0,me=!1,ge=2147483647,ye=null,we={},be=Function,xe=be[y],Ae=Array,Ee=String,ke=Number,Te="[object ",Se=(Ee[g],Ae[g],be[g],Object.keys),De=!{toString:ye}.propertyIsEnumerable(v),Ce=ke.MAX_VALUE,Oe=ke.MIN_VALUE,Me=(ke.MAX_SAFE_INTEGER,ke.MIN_SAFE_INTEGER,function(){}),Ie=function(e,t,n,r){if(!e)return-1;for(var i,o=n||e[P],u=t+(r?0:-1),a=r?-1:1;(u+=a)<o;)if(i=e[u],i!==i)return u;return-1},_e=function(e,t,n,r,i){var o,u,a;if(!e)return-1;if(t!==t)return Ie(e,n,r,i);for(o=(n||0)-1,u=r||e[P],a=i?-1:1;(o+=a)<u;)if(e[o]===t)return o;return-1},Ne=function(e,t,n,r,i){var o,u=n||0,a=r||e[P]-1,s=ge>=a?ve:me;if(t!==t)return Ie(e,u,a,i);if(s)for(;a>=u;){if(o=u+a>>1,e[o]===t)return o;e[o]<t?u=o+1:a=o-1}else for(;a>=u;){if(o=(u+a)/2|0,e[o]===t)return o;e[o]<t?u=o+1:a=o-1}return-1},Re=function(e,t,n,r,i){return(n===ve&&e&&e[P]>100?Ne:_e)(e,t,n,r,i)},je=function(e){return e==ye?o:e+o},Le=function(e){return(it(e)?JSON.stringify(e):ze(e)?e.toString():e)+o},Pe=function(e,t,n,r){var i=t||function(e,t){return e>t};return r&&(i=Mt(i,r)),e.sort(function(e,t){var r=i(e,t),o=+r;return o==ye&&(o=0),Ze(o)&&(o=0),o>1&&(o=1),(r===me||-1>o)&&(o=-1),n?-1*o:o})},Ve=function(e){return e},Be=function(e,t){var n=me;return e&&ze(e.hasOwnProperty)&&(n=e.hasOwnProperty(t)),n},He=function(e){return e&&e[fe]&&e[fe][y]||e[y]},qe=function(e,t){var n=t;return Be(n,y)&&(n=n[y]),e instanceof n},Ue=function(e){return function(t){return Qe(t)?t.split(e):t}},Fe=function(e){return function(t){return t.join(e)}},We=Fe(u),Ge=Ue(u),$e=function(e,t){return t||(t=function(){return ve}),function(n){var r=0;return typeof n===e&&t(n)&&(r=ve),!!r}},ze=$e(q),Je=$e(H),Qe=$e(B),Xe=function(e){return e===ye},Ye=function(e){return e===n},Ke=function(e){return Ye(e)||Xe(e)},Ze=function(e){return e!==e},et=function(e){return function(){return!e.apply(this,arguments)}},tt=$e("number",function(e){return e===e}),nt=r.isFinite,rt=function(e){return tt(e)&&nt(e)},it=$e(V,function(e){return!!e}),ot=Array.isArray,ut=function(e){return!Ht(e)[P]},at=Ge("valueOf isPrototypeOf "+v+" propertyIsEnumerable hasOwnProperty toLocaleString"),st=function(e){for(var t=0,n={},r=Ht(e),i=r[P];i>t;t++)n[e[r[t]]]=r[t];return n},ct=function(e,t){var n=at[P],r=e[y],i=ze(r)&&r[g]||ObjProto,o=y;for(Be(e,o)&&!contains(t,o)&&t.push(o);n--;)o=at[n],o in e&&e[o]!==i[o]&&!contains(t,o)&&t.push(o)},ft=function(){return+new Date},lt=(ft(),function(){return ft()-this.offset}),dt=window.performance,ht=dt?(dt.now=dt.now||dt.webkitNow||dt.msNow||dt.oNow||dt.mozNow||lt)&&dt:{now:lt},pt=function(){var e=me,t=arguments,n=t[P],r=1,i=t[0];for(i===ve&&(e=ve,i=t[1],r=2),i=i||{};n>r;r++)vt(i,t[r],e);return i},vt=function(e,t,r){for(var i,o,u=0,a=Bt(t),s=a[P];s>u;u++)i=a[u],t[i]!==n&&(o=t[i],r&&it(t[i])?(it(e[i])||(e[i]=vn(t[i])),vt(e[i],t[i],r)):e[i]=o);return e},mt=function(e){var t=[];return _t(e,function(e){t.push(e)}),t},gt=function(e){var t=[];return It(e,function(e,n){It(e,function(e,r){var i=t[r];t[r]||(i=t[r]=[]),i[n]=e})}),t},yt=function(e,t){var n={};return t?It(e,function(e,r){n[e]=t[r]}):It(e,function(e,t){n[e[0]]=e[1]}),n},wt=Math.pow(2,53)-1,bt=function(e){var t=!!e&&e[P];return ot(e)||tt(t)&&!Qe(e)&&t>=0&&wt>=t&&!ze(e)},xt=function(e,t,n){var r=Ht(e),i=Mt(t,n);return{keys:r,handler:function(t,n,r){return i(e[t],t,e)}}},At=function(e){return function(t,n,r,i){var o,u=t,a=u,s=n,c=s,f=r,l=i;return u?(bt(u)||(o=xt(a,s,f),c=o.handler,a=o.keys,f=ye),e(a,c,f,l)):u}},Et=function(e){return At(function(t,n,r,i){for(var o=t[P],u=Mt(n,r),a=i||(e>0?0:o-1);a>=0&&o>a;a+=e)if(u(t[a],a,t))return a;return-1})},kt=Et(1),Tt=Et(-1),St=function(e){return-1!==e&&e===e&&e!==n&&e!==ye&&e!==me&&e!==ve},Dt=function(e){return function(t,n,r,i){var o=e(t,n,r,i);return St(o)?t[o]:void 0}},Ct=Dt(kt),Ot=Dt(Tt),Mt=function(e){var t=wn(arguments).slice(1);return e.bind.apply(e,t)},It=function(e,t,n,r){var i,o,u,a,s,c;if(e){if(s=0,a=e[P],c=a%8,u=parseInt(a/8,10),0>r&&(s=a-1),i=r||1,o=Mt(t,n),c>0)do o(e[s],s,e),s+=i;while(--c>0);if(u)do o(e[s],s,e),s+=i,o(e[s],s,e),s+=i,o(e[s],s,e),s+=i,o(e[s],s,e),s+=i,o(e[s],s,e),s+=i,o(e[s],s,e),s+=i,o(e[s],s,e),s+=i,o(e[s],s,e),s+=i;while(--u>0);return e}},_t=At(It),Nt=function(e){return function(t,n,r){return e(t,n,arguments[P]<3?ye:r,-1)}},Rt=Nt(It),jt=Nt(_t),Lt=function(e){var t,r=e+o;return r=r.trim(),r===me+o&&(t=me),r===ve+o&&(t=ve),t===n&&(t=e),t},Pt=function(e){return parseFloat(e)||0},Vt=function(e){return parseInt(e,10)||0},Bt=function(e){var t,n=[];for(t in e)n.push(t);return De&&ct(e,n),n},Ht=function(e){var t,n=[];if(!e||!it(e)&&!ze(e))return n;if(Se)return Se(e);for(t in e)Be(e,t)&&n.push(t);return De&&ct(e,n),n},qt=function(e,t,n){var r,i,o,u,a=this,s=Qe(e);if(e===me)return pt(a[g],t),a;s||(t=e),o=Be(t,y),t&&o&&(r=t[y]),s?(i=a,r&&(i=r),r=new xe("parent","return function "+e+"(){return parent.apply(this,arguments);}")(i)):r=r||new xe("parent","return "+a.toString())(a),r[de]=qt;var c=function(){this[y]=r};return c[g]=a[g],r[g]=new c,t&&pt(r[g],t),u=r,r=Ut(u),r.__super__=a,u[g][fe]=r,r},Ut=function(e){var t=function(t,n,r,i,o,u){return t instanceof e?t:new e(t,n,r,i,o,u)};return t.isInstance=e.isInstance=function(t){return qe(t,e)},t[y]=e,t[de]=e[de]=function(){return qt.apply(e,arguments)},t},Ft=function(e){var t;return function(){return t?void 0:(t=1,e.apply(this,arguments))}},Wt=function(e,t,r,i){if(e===t)return 0!==e||1/e===1/t;if(e===ye||e===n||t===n||t===ye)return e===t;var u=je.call(e);if(u!==je.call(t))return me;switch(u){case Te+"RegExp]":case Te+"String]":return o+e===o+t;case Te+"Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case Te+"Date]":case Te+"Boolean]":return+e===+t}var a=u===Te+"Array]";if(!a){if(!it(e)||!it(t))return me;var s=e[y],c=t[y];if(s!==c&&!(ze(s)&&s instanceof s&&ze(c)&&c instanceof c)&&y in e&&y in t)return me}for(var f=r[P];f--;)if(r[f]===e)return i[f]===t;if(r.push(e),i.push(t),a){if(f=e[P],f!==t[P])return me;for(;f--;)if(!Wt(e[f],t[f],r,i))return me}else{var l,d=Ht(e);if(f=d[P],Ht(t)[P]!==f)return me;for(;f--;)if(l=d[f],!Be(t,l)||!Wt(e[l],t[l],r,i))return me}return r.pop(),i.pop(),ve},Gt=function(e,t){return Wt(e,t,[],[])},$t=function(e){return mn(e,function(e){return e})},zt=function(e){return dn(Le(e))},Jt=function(e,t,n){var r={},i=ot(e),o=ze(t);return _t(e,function(u,a){i?!o||n?r[u]=t:r[u]=t(u):r[a]=t(e[a],a)}),r},Qt=function(e){return pt(er,e)},Xt=r.Image,Yt=function(e,t){var n=new Xt;return e=Mn(e),t&&(n.onload=function(){er.unshift(arguments,e),t.apply(this,arguments)}),n.src=e,n},Kt=function(e){return function(t){return e(t)}},Zt=function(){var e=[];return e.concat.apply(e,mn(arguments,Kt(wn)))},en=function(){return Un(arguments,function(e,t){return It(t,function(t){-1===Re(e,t)&&e.push(t)}),e},[])},tn=function(e,t){var n=e[P],r=t%n,i=e.splice(r);return e.unshift.apply(e,i),e},nn=function(e,t){var n=e[P],r=t%n,i=e.splice(0,n-r);return e.push.apply(e,i),e},rn=function(e,t){var n=Ht(t),r=Object(e);return!Ct(n,function(e){return t[e]===r[e]&&e in r?void 0:ve})},on=function(e){return function(t){return rn(t,e)}},un=function(e,t){return mn(e,function(e){return Pn(e,t)})},an=function(e,t,n){var r=bt(e),i=Mt(t,n),o=0;return Un(e,function(e,t,n,u){return o++,i(t,n,u)&&(r?e.push(t):e[n]=t),e},r?[]:{})},sn=function(e,t){return an(e,on(t))},cn=function(e,t){return Ct(e,on(t))},fn=function(e,t){return Ot(e,on(t))},ln=function(e,t){return an(e,et(on(t)))},dn=function(e){var t,r=e;return Qe(r)&&(r=r.trim(),"{"===r[0]&&"}"===r[r[P]-1]||"["===r[0]&&"]"===r[r[P]-1]?Qn(function(){r=JSON.parse(r)},zn.error):"true"===r?r=ve:(t=+r,t===t?r=t:"false"===r?r=me:"null"===r?r=ye:"undefined"===r?r=n:"function"===r.slice(0,8)&&(r=new xe("return "+r)()))),r},hn=function(e,t){var n,r=t.toString();return ze(t)&&(n=r.split("{"),r=n.shift(),r=(r=n.join("{")).slice(0,r[P]-1)),new xe("context","with(context) {\n"+r+"\n}")(e)},pn=function(e,t,n){var r;return function(){var i=this,o=arguments,u=n&&!r,a=function(){r=ye,n||e.apply(i,o)};return clearTimeout(r),r=setTimeout(a,t),u&&e.apply(i,o),r}},vn=function(e){return bt(e)?[]:{}},mn=function(e,t,n){var r=vn(e),i=Mt(t,n);return e?_t(e,function(t,n){r[n]=i(t,n,e)})&&r:r},gn=function(e){return 1===e[P]?[e[0]]:Array.apply(ye,e)},yn=function(e){return e?Un(e,function(e,t){return e.push(t),e},[]):[]},wn=function(e,t){return bt(e)?ot(e)?e:gn(e):Qe(e)?e.split(Qe(t)?t:o):t===ve?yn(e):[e]},bn=function(e,t,n){var r=!!t;return Un(e,function(e,t){var i;return bt(t)?(i=r?bn(t,r,n):t,e.concat(i)):(n&&n(t),e.push(t),e)},[])},xn=function(e,t,n){return bn(bt(e)?e:yn(e),t,n)},An=function(e,t){var n=[];return n.concat.apply(n,mn(e,t))},En=function(e,t,r){return e===e&&(r!==n&&(e=r>=e?e:r),t!==n&&(e=e>=t?e:t)),e},kn=function(e){return En(e,MIN_SAFE_VALUE,MAX_SAFE_VALUE)},Tn=function(e){return Ce>e&&e>Oe},Sn=function(e){var t=e%1;return e===e?t?e-t:e:0},Dn=function(e,t){var n;return Sn((n=+e)==e?t?n:kn(n):0)},Cn=function(e){return tt(e)&&Tn(e)},On=function(e,t,n){var r,i;return t||(t=250),function(){var o=n||this,u=ft(),a=arguments;r&&r+t>u?(clearTimeout(i),i=setTimeout(function(){r=u,e.apply(o,a)},t)):(r=u,e.apply(o,a))}},Mn=function(e){var t=e.url,r=[];return it(e)?(_t(e.query,function(e,t){e!==n&&(e=encodeURIComponent(Le(e)),r.push(t+"="+e))}),r[P]&&(t+="?"),t+=r.join("&"),e.hash&&(e.hash=it(e.hash)?encodeURI(Le(e.hash)):hash,t+="#"+e.hash)):t=e,t},In=function(e,t,n){var r,i,o=He(e);n=n||1;do i=o[g],r=i[t],o=He(i);while(--n>0&&o&&rt(n));return r},_n=function(){var e="crypto"in r&&"getRandomValues"in crypto,t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i,o,u;return e&&(i=r.crypto.getRandomValues(new Uint32Array(1)),i===n&&(e=me)),e||(i=[Math.floor(1e10*Math.random())]),i=i[0],o=i%16,u="x"===t?o:3&o|8,u.toString(16)});return e?t:"SF"+t},Nn=function(e,t,n,r){var i,o=it(e),u=Mt(n,r);return o&&(i=Ht(e)),function(n,r,a,s,c,f){o?It(i,function(t){u(t,e[t],n,r,a,s,c,f)}):u(e,t,n,r,a,s,c,f)}},Rn=function(e,t,n,r){var i=r?Mt(n,r):n,o=it(e)?e:me;o?_t(o,jn(i)):i(e,t)},jn=function(e){return function(t,n,r){e(n,t,r)}},Ln=function(e,t,n){var r;return tt(t)||(t=1),r=Math.pow(n||10,t),parseInt(r*e,10)/r},Pn=function(e,t,n,r){return e==ye?e:ze(e[t])?e[t](n):it(e)?e[t]:e},Vn=Math,Bn=function(e){return function(t){return Vn[e].apply(Vn,t)}},Hn=function(e){return function(t){return t=t||Me,e.call(this,t)}},qn=function(e){var t=function(t,n,r,i,o,u){for(var a;o>=0&&u>o;o+=e)a=i?i[o]:o,r=n(r,t[a],a,t);return r};return function(n,r,i,o){var u=!bt(n)&&Ht(n),a=(u||n)[P],s=e>0?0:a-1;return arguments[P]<3&&(i=n[u?u[s]:s],s+=e),t(n,r,i,u,s,a)}},Un=qn(1),Fn=qn(-1),Wn=function(e,t){return Un(e,function(n,r,i){return t(r,i,e)&&n.push(r),n},[])},Gn=r.console||{},$n=Gn.log||Me,zn=pt(Jt(Ge("trace log dir error"),function(e){var t=Gn[e]||$n;return function(){return t.apply(Gn,arguments)}}),{exception:function(e){throw new Error(e&&e.message||e)},assert:function(e,t){e||Jn(t)}}),Jn=zn.exception,Qn=function(e,t,n){var r,i=ye;try{r=e()}catch(o){i=o,r=t?t(o):r}finally{r=n?n(i,r):r}return r},Xn=function(e,t){return t===n?!e:!!t},Yn=function(e){return function(){return e}},Kn=function(e,t){var n=e===ve?t:arguments,r=n[P];return function(){for(var e=1,t=arguments,i=n[0].apply(this,t);r>e;)i=n[e].call(this,i),++e;return i}},Zn={number:tt,string:Qe,object:it,nan:Ze,array:ot,"function":ze,"boolean":Je,"null":Xe,length:Cn,validInteger:Tn,arrayLike:bt},er=e._={is:Zn,performance:ht,months:Ge("january feburary march april may june july august september october november december"),weekdays:Ge("sunday monday tuesday wednesday thursday friday saturday"),constructorWrapper:Ut,stringifyQuery:Mn,intendedObject:Rn,intendedIteration:Nn,ensureFunction:Hn,parseDecimal:Pt,flatten:xn,gather:An,isArrayLike:bt,isInstance:qe,hasEnumBug:De,roundFloat:Ln,factories:we,fullClone:zt,toBoolean:Lt,stringify:Le,splitGen:Ue,gapSplit:Ge,values:mt,zip:gt,object:yt,wraptry:Qn,toString:je,throttle:On,debounce:pn,protoProperty:In,protoProp:In,binaryIndexOf:Ne,indexOfNaN:Ie,toInteger:Dn,indexOf:_e,joinGen:Fe,toArray:wn,isEqual:Gt,gapJoin:We,isArray:ot,isEmpty:ut,returns:Yn,isBoolean:Je,invert:st,extend:pt,noop:Me,toggle:Xn,reduce:Un,foldl:Un,foldr:Fn,now:ft,some:Wn,map:mn,result:Pn,isUndefined:Ye,isFunction:ze,isObject:it,isNumber:tt,isFinite:rt,isString:Qe,isBlank:Ke,isNull:Xe,isNaN:Ze,eachProxy:At,exports:Qt,allKeys:Bt,evaluate:hn,parse:dn,merge:vt,fetch:Yt,clone:$t,bind:Mt,duff:It,duffRight:Rt,eachRight:jt,iterates:xt,sort:Pe,wrap:Jt,uuid:_n,keys:Ht,once:Ft,each:_t,flow:Kn,has:Be,negate:et,pI:Vt,createPredicateIndexFinder:Et,findIndex:kt,findLastIndex:Tt,validKey:St,finder:Dt,find:Ct,findLast:Ot,console:zn,min:Bn("min"),max:Bn("max"),arrayLikeToArray:gn,objectToArray:yn,math:Jt(Ge("E LN2 LN10 LOG2E LOG10E PI SQRT1_2 SQRT2 abs acos acosh asin asinh atan atan2 atanh cbrt ceil clz32 cos cosh exp expm1 floor fround hypot imul log log1p log2 log10 pow random round sign sin sinh sqrt tan tanh trunc"),function(e){return Math[e]})};we.Extendable=Ut(t),e.scope(function(e){e.shims=function(e){var t=function(){function e(e){return 10>e?"0"+e:e}function t(e){return c.lastIndex=0,c.test(e)?'"'+e.replace(c,function(e){var t=f[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function n(e,r){var s,c,f,l,d,h=o,p=r[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof a&&(p=a.call(r,e,p)),typeof p){case"string":return t(p);case"number":return rt(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(o+=u,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(l=p[i],s=0;l>s;s+=1)d[s]=n(s,p)||"null";return f=0===d[i]?"[]":o?"[\n"+o+d.join(",\n"+o)+"\n"+h+"]":"["+d.join(",")+"]",o=h,f}if(a&&"object"==typeof a)for(l=a[i],s=0;l>s;s+=1)"string"==typeof a[s]&&(c=a[s],f=n(c,p),f&&d.push(t(c)+(o?": ":":")+f));else for(c in p)Object.prototype.hasOwnProperty.call(p,c)&&(f=n(c,p),f&&d.push(t(c)+(o?": ":":")+f));return f=0===d[i]?"{}":o?"{\n"+o+d.join(",\n"+o)+"\n"+h+"}":"{"+d.join(",")+"}",o=h,f}}var r=this,i="length";if(r.performance=r.performance||{},r.performance.now=function(){var e=r.performance;return e.now||e.mozNow||e.msNow||e.oNow||e.webkitNow||function(){return(new Date).getTime()}}(),!JSON){"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return rt(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var o,u,a,s=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var s;if(o="",u="","number"==typeof r)for(s=0;r>s;s+=1)u+=" ";else"string"==typeof r&&(u=r);if(a=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t[i]))throw new Error("JSON.stringify");return n("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(e,t){function n(e,r){var i,o,u=e[r];if(u&&"object"==typeof u)for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(o=n(u,i),void 0!==o?u[i]=o:delete u[i]);return t.call(e,r,u)}var r;if(e=String(e),s.lastIndex=0,s.test(e)&&(e=e.replace(s,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return r=Function.prototype.constructor("("+e+")"),"function"==typeof t?n({"":r},""):r;throw new SyntaxError("JSON.parse")})}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(r.prototype=this.prototype),i.prototype=new r,i}),r.matchMedia=r.matchMedia||function(){var e=r.styleMedia||r.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),i="getComputedStyle"in r&&r.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===i.width}}}return function(t){return t=t||"all",{matches:e.matchMedium(t),media:t}}}()};t.call(e)},e.shims(r)});var tr=function(e){var t={};return function(n){return Be(t,n)||(t[n]=e(n)),t[n]}},nr=function(e,t){var n={};return function(r,i){var o;return i=i||t,(o=n[i]=n[i]||tr(e(i)))(r)}},Ee=er.extend(Jt(Ge("toLowerCase toUpperCase trim"),function(e){return tr(function(t){return t[e]()})}),Jt(Ge("match search"),function(e){return nr(function(t){return function(n){return n[e](t)}})})),rr=function(e){return function(){var t=wn(arguments),n=this;return mn(t[0],function(r){return t[0]=r,e.apply(n,t)})}},ir=function(e,t,n){var r=e.slice(t[P]),i=r[0];return n&&(i=r[0].toLowerCase()),r=i+r.slice(1)},or=rr(ir),ur=function(e,t,r,i){var o=t+e;return r!==n&&(o=t+(i||a)+e,o=r?fr(o,i):dr(o,i)),o},ar=rr(ur),sr=function(){var e={};return function(t){var n=e[t];return n||(e[t]=n=new Function[y]("return "+t)),n()}}(),cr=function(){var e={},t=0;return function(n){var r;return n?(e[n]=e[n]||0,++e[n],r=e[n]):(++t,r=t),n?n+r:r}}(),fr=nr(function(e){return function(t){var n,r,i;if(Qe(t)){for(t[0]===e&&(t=t.slice(1)),r=t.split(e),n=r[P]-1;n>=1;n--)r[n]&&(r[n]=lr(r[n]));i=r.join(o)}return i}},a),lr=tr(function(e){return e[0].toUpperCase()+e.slice(1)}),dr=nr(function(e){return function(t){return t.replace(/([a-z])([A-Z])/g,"$1"+e+"$2").replace(/[A-Z]/g,function(e){return e.toLowerCase()})}},a),hr=function(e){return dr(e,"_")},pr=nr(function(e){var t={},n={},r=[],i=Ge(e);i.sort(function(e,i){var o=e[P],u=i[P],a=er.max([-1,er.min([1,o-u])]);return n[e]=n[i]=ve,t[o]||(t[o]=ve,r.push(o)),t[u]||(t[u]=ve,r.push(u)),-1*(0===a?e>i?-1:1:a)});return r.sort(function(e,t){return-1*er.max([-1,er.min([1,e-t])])}),function(e){for(var t,i=0,u=(e+o).trim(),a=u[P];r[i];){if(r[i]<a&&(t=u.substr(a-r[i],a),n[t]))return t;i++}return me}}),vr=Ge("px em rem ex in cm % vh vw pc pt mm vmax vmin"),mr=function(e){return pr(e,vr)},gr=tr(function(e){var t=!1;return(0===e.indexOf(se)&&e.split("//")[P]>=2||0===e.indexOf("//"))&&(t=!0),t}),yr=tr(function(e){var t=o,n=Re(e,"#")+1;return n&&(t=e.slice(n-1)),t}),wr=function(e,t,n){return e[n||0]===t},br=wr,xr=function(e){var t,n,i,u,a,s=0,c=r.decodeURIComponent;for(e||(e=r[le].search),i=e.slice(1).split("&"),t={};s<i[P];s++)n=i[s].split("="),n[0]&&(n[P]<2&&n[PUSH](o),u=n[1],u=c(u),"'"!==u[0]&&'"'!==u[0]||(u=u.slice(1,u[P]-1)),u===ve+o&&(u=ve),u===me+o&&(u=me),Qe(u)&&(a=+u,a==u&&a+o===u&&(u=a)),t[c(n[0])]=u);return t},Ar=function(e){return e.toString=function(){return e.href},e.replace=function(t){var n=Sr(t);return n.previous=e,n},e},Er=tr(function(e){var t;return e&&(Qe(e)||(e=e.referrer),Qe(e)&&(e+=c,t=e.match(/^http?:\/\/.*?\//),t&&(t=t[0].slice(0,t[0][P]-1)))),t||o}),kr=[se,ce,"file","about","javascript"],Tr={"http:":ve,"https:":ve},Sr=function(e,t,n){var i,u,a,f,l,d,h,p=n||window,v=e||o,m=o,g=o,y=o,w=o,b=o,x=o,A=_e(v,"?")+1,E={},k=kr[P],S=v.split(T),D=p.location.protocol,C=S[P]-1&&(l=S.shift()),O=(C&&Ct(kr,function(e){return e===l})||D.slice(0,D[P]-1))+T;if(A?(m=v.slice(A-1),g=yr(m)):g=yr(v),A&&(m=m.split(g).join(o),E=xr(m),v=v.slice(0,A-1)),v[0]===c&&v[1]===c)O=r.location.protocol;else{for(;k--&&!O;)v.slice(0,kr[k][P])===kr[k]&&(O=kr[k]);O||(O=se)}if(S=v.split(T),S[P]-1){for(l=S.shift(),h=S.join(T).split(c);!y;)y=h.shift();f=y.split(T),x=f.shift(),b=f[P]?f[0]:o,i=S.shift(),v=S.join(T).slice(y[P])}else y=p.location.host,b=p.location.port,x=p.location.hostname;return d=p.location.pathname.slice(1),v[0]===c&&v[1]!==c&&(v=v.slice(1),d=o),v[0]===s&&(v=v.slice(2)),w=c+d+v,a=O+(Tr[O]?c+c:o)+x+(b?T+b:o),u=a+w+(m||o)+(g||o),Ar({passed:e,port:b,hostname:x,pathname:w,search:m.slice(1),host:y,hash:g.slice(1),href:u,protocol:O.slice(0,O[P]-1),friendlyProtocol:!Tr[O],origin:a,searchObject:E})},Dr=60,Cr=7,Or=30,Mr=24,Ir=1e3,_r=365,Nr=Ir*Dr,Rr=Nr*Dr,jr=Rr*Mr,Lr=Rr*Cr,Pr=Rr*Or,Vr=Rr*_r,Br={ms:1,secs:Ir,s:Ir,mins:Nr,hrs:Rr,days:jr,wks:Lr,mnths:Pr,yrs:Vr},Hr=[],qr=Un(Br,function(e,t,n){return Hr.push(n),e[n]=function(e){return e*t},e},{}),Ur=Ue(","),Fr=Ge("sunday monday tuesday wednesday thursday friday saturday"),Wr=Ge("january feburary march april may june july august september october november december"),Gr=Jt(Wr,ve),$r=tr(function(e){var t=0;return It(Ur(e+o),function(e){var n=e,r=pr(n,Hr),i=+n.split(r||o).join(o),u=qr[r];i===i&&(u&&(i=u(i)),t+=i)}),t});er.exports({monthIndex:Gr,months:Wr,weekdays:Fr,customUnits:pr,uniqueId:cr,cacheable:tr,categoricallyCacheable:nr,deprefix:ir,deprefixAll:or,prefix:ur,prefixAll:ar,upCase:lr,unCamelCase:dr,spinalCase:dr,camelCase:fr,snakeCase:hr,reference:Er,string:Ee,units:mr,baseUnitList:vr,isHttp:gr,parseHash:yr,parseUrl:Sr,parseSearch:xr,parseObject:sr,time:$r,startsWith:br,itemIs:wr}),e.scope(function(e){var t=e._,r=t.factories,i="StatusMarker",o="statuses",u={creation:{},destruction:{}},a=Yn(ye),s=function(){return{}},c=function(e,t,n){return n},f=function(e,t){return function(n,r,i){return this.directive(e)[t](n,r,i)}},l=function(e,t){return function(n){var r=this,i=r.directive(e);return It(n,i[t],i),r}},d=function(e,t,n){var r=ze(n);return function(i,o,u,a,s,c){var f=this;return f[e]?f[e][t](i,o,u,a,s,c):r?n(f):n}},h=function(e,t,n){var r;!Qe(e)&&Jn({message:"directives must be registered with a string for a name"})||!ze(t)&&Jn({message:"directives must be registered with at least a create function"});return u.creation[e]=(r=u.creation[e])||t,u.destruction[e]=u.destruction[e]||n,!r},p=function(t,n,r,i){var o=i||c,a=r||c;u.creation[t]||Jn({message:"directives must exist before they can be extended"});return e.defineDirective(n,function(e,n,r){var i=new u.creation[t](e,n,r);return new a(e,n,i)},function(e,n,r){var i=u.destruction[t](e,n,r);return o(e,n,i)})},v=(r.Directive=r.Extendable.extend("Directive",{mark:f(i,"mark"),unmark:f(i,"unmark"),remark:f(i,"remark"),is:d(i,"is",me),directive:function(e){var t,n,r=this;return(n=r[e])?n:(t=r["directive:creation:"+e]||u.creation[e]||s,r[e]=new t(r,e),r[e])},directiveDestruction:function(e){var t=(u.destruction[e]||a)(this[e],this,e);return delete this[e],t}}),r.Extendable.extend(i,{constructor:function(){return this[o]={},this},has:function(e){return this[o][e]!==n},mark:function(e){var t=this[o][e];return this[o][e]=ve,t!==ve},unmark:function(e){var t=this[o][e];return this[o][e]=me,t!==me},remark:function(e,t){var r=this[o][e],i=this[o][e]=t===n?!this[o][e]:!!t;return r!==i},is:function(e){return!!this[o][e]},isNot:function(e){return!this[o][e]}}));h(i,v[y]),e.defineDirective=h,e.extendDirective=p,t.exports({directives:{parody:f,checkParody:d,iterate:l}})});var zr=er.directives,Jr="Collection",Qr="reversed",Xr=function(e,t,n){return It(e,function(e){Pn(e,t,n)})},Yr=function(e,t,n){return mn(e,function(e){return Pn(e,t,n)})},Kr=function(e,t,n){return It(e,function(e){Pn(e,t,n)},ye,-1)};e.scope(function(e){var t={message:"object must not be null or undefined"},r={message:"objects in sorted collections must have either a number or string for their valueOf result"},i={message:"list cannot be modified while it is being iterated over"},a=function(e){return function(e,t,n,r,i){var o=0;return It(t,function(t){o+=s(e,t,n,r,i)}),o===e[P]}},s=function(e,t,n,r,i){var o=_e(e,t,n,r,i);return o+1&&f(e,o),o+=1,!!o},c=a(s),f=function(e,t){return e.splice(t,1)[0]},d=function(e,t,n,r,i){var o=0,u=_e(e,t,n,r,i);return-1===u&&(o=e.push(t)),!!o},h=a(d),p=function(e,t,n){var r=e[P];return e.splice(n||0,0,t),r!==e[P]},v=function(e,t,n){var r=n||Me,i=[],o=t||0,u=tt(o),a=bt(o);return 0>o&&(u=!1),e[P]?(u?(i=[e[o]],r(i[0])):a?It(o,function(t){var n=e[t];i.push(n),r(n)}):(i=[e[0]],r(i[0])),i):i},w=function(e,t,n,r){var i,o,u;for(t==ye&&(t=e||0,e=0),rt(e)&&tt(e)||(e=0),n=+n||1,i=Math.max(Math.ceil((t-e)/n),0)+(+r||0),o=[],u=0;i>u;)o[u]=e,u++,e+=n;return o},b=function(e,t,n,r,i){var o,u,a,s;if(r>=i||!tt(r)||!tt(i)||!rt(r)||!rt(i))return e;for(s=n||this,o=Mt(t,s),i=Math.abs(i),a=r;i>a;)u=ye,e[P]>a&&(u=e[a]),o(u,a,e),a++;return e},x=function(e,t,n,r){return b(e,t,n,0,r)},A=function(e,t,n,r){return b(e,t,n,r,e[P])},E=function(e,t,n,r){for(var i,o,u,a=n||0,s=r||e[P]-1;s>=a;)if(i=(a+s)/2|0,o=e[i],t>o)a=i+1;else{if(!(o>t))return i;s=i-1}return u=~~s},k=function(e,t){return function(){return new this.__constructor__(e.apply(t||this,arguments))}},T="Registry",S=we[T]=we.Directive.extend(T,{constructor:function(){return this.reset(),this},get:function(e,t){var n=this.register[e];return n&&n[t]},keep:function(e,t,r){var i=this.register,o=i[e]=i[e]||{};return r===n&&this.count--,o[t]===n&&this.count++,o[t]=r,this},group:function(e,t){var n=this.register;return n[e]=t||n[e]||{},n[e]},swap:function(e,t,n){var r=this.get(e,t);return this.keep(e,t,n),r},drop:function(e,t){return this.swap(e,t)},reset:function(e,t){var n=this.register,r=this.count;return this.register=e||{},this.count=t||0,[n,r]}}),D=Ge("eq pluck where whereNot map mapCall filter cycle uncycle flatten gather"),C={each:It,duff:It,forEach:It,eachCall:Xr,eachRight:Rt,duffRight:Rt,forEachRight:Rt,eachCallRight:Kr},O=(Ht(C),Ge("add")),M=Ge("insertAt remove removeAt"),I=Ge("pop shift splice"),_=Ge("reverse"),N=Ge("push unshift"),R=Ge("join"),j=Ge("count countTo countFrom merge"),L=Ge("foldr foldl reduce"),V=Ge("find findLast findWhere findLastWhere"),B=Ge("indexOf"),H=L.concat(V),q=function(e){return function(t,n,r,i,o,u){var a,s=this;return++s.iterating,a=e(s,t,n,r,i,o,u),--s.iterating,a}},U=pt({seeker:function(e,t){return er.duffRight(this.items,e,t)}},Jt(R,function(e){return function(t){return this.items[e](t)}}),Jt(B.concat(O),function(e){return function(t,n,r,i,o){var u=this;return er[e](u.items,t,n,r,i,o)}}),Jt(N,function(e){return function(t){var n=ot(t)?t:arguments;return this.items[e].apply(this.items,n)}}),Jt(I,function(e){return function(t,n,r,o,u,a){var s=this;return s.iterating?Jn(i):s.items[e](t,n,r,o,u,a)}}),Jt(M,function(e){return function(t,n,r,o,u){var a=this;return a.iterating?Jn(i):er[e](a.items,t,n,r,o,u)}}),Jt(_,function(e){return function(){var t=this;return t.directive("StatusManager").toggle(Qr),t.items[e](),t}}),Jt(C,function(e){return q(function(t,n,r){var i=t.items,o=n,u=arguments[P]>1?r:t;return e(i,o,u),t})}),Jt(j,function(e){return q(function(t,n,r,i){return er[e](t.items,n,t,r,i),t})}),Jt(D,function(e){return q(function(t,n,r,i){return new G[y](er[e](t.items,n,r,i))})}),Jt(H,function(e){return q(function(t,n,r,i){return er[e](t.items,n,r,i)})})),F=er.exports({eachCall:Xr,eachCallRight:Kr,filter:an,matches:on,mapCall:Yr,add:d,removeAll:c,addAll:h,insertAt:p,removeAt:f,remove:s,cycle:tn,uncycle:nn,concat:Zt,pluck:un,where:sn,findWhere:cn,findLastWhere:fn,range:w,count:b,countTo:x,countFrom:A,whereNot:ln,eachRight:jt,duffRight:Rt,flatten:xn,eq:v}),W="List",G=we.List=we.Directive.extend(lr(W),pt({constructor:function(e){return this.reset(e),this},call:function(e){return this.each(function(t){t(e)}),this},obliteration:function(e,t){return Rt(this.items,e,t===n?this:t),this},empty:function(){return this.reset()},reset:function(e){var t=this;t.items||[];return t.iterating=t.iterating?Jn(i):0,t.items=e==ye?[]:bt(e)?wn(e):[e],t.unmark(Qr),t},unwrap:function(){return this.items},length:function(){return this.items.length},first:function(){return this.items[0]},last:function(){return this.items[this.items.length-1]},index:function(e){return this.items[e||0]},has:function(e){return-1!==this.indexOf(e);
},sort:function(e){var t=this;return Pe(t.items,e,t.is(Qr),t),t},toString:function(){return Le(this.items)},toJSON:function(){return mn(this.items,function(e){return Pn(e,m)})},range:k(w),concat:k(function(){var e=this.unwrap();return e.concat.apply(e,mn(arguments,function(e){return G(e).unwrap()}))}),results:function(e,t){return this.map(function(n){return Pn(n,e,t)})}},U)),$=(e.defineDirective(W,function(){return new G[y]}),we[Jr]=we.List.extend(Jr,pt({get:zr.parody(T,"get"),register:zr.parody(T,"keep"),unRegister:zr.parody(T,"drop"),swapRegister:zr.parody(T,"swap"),empty:function(e,t,n){this.reset(e,t,n),this.directive(T).reset(e,t,n)}}))),z=(e.defineDirective(Jr,function(){return $()}),we.SortedCollection=$.extend("Sorted"+Jr,{constructor:function(e,t){var n=this;return G[y].call(n),e&&!t&&n.load(bt(e)?e:[e]),n},sort:function(){var e=this;return Pe(e.unwrap(),e.is(Qr)?function(e,t){return t>e}:ye,me,e),e},reverse:function(){var e=this;return e.toggle(Qr),e.sort(),e},closestIndex:function(e){return E(this.unwrap(),e)},closest:function(e){var t,r=this.unwrap();return-1===(t=E(r,e))?n:r[t]},validIDType:function(e){return tt(e)||Qe(e)},indexOf:function(e,t,n){return Re(this.unwrap(),e,ve)},load:function(e){var t=this;return ot(e)?It(e,t.add,t):t.add(e),t},add:function(e){var n,i=this,o=(e==ye&&Jn(t),e&&e.valueOf()),u=(n=i[T])&&i.get(l,o);return u?me:(F=!i.validIDType(o)&&Jn(r),i.insertAt(e,i.closestIndex(o)+1),(n||i.directive(T)).keep(l,o,e),ve)},remove:function(e,r){var i=this,o=(e==ye&&Jn(t),e&&e.valueOf());return e==ye||i.get(l,o)==ye?me:(i.removeAt(r===n?i.indexOf(e):r),i.unRegister(l,o),ve)},pop:function(){return this.remove(this.last())},shift:function(){return this.remove(this.first())}})),J=we.StringObject=we.Extendable.extend("StringObject",{constructor:function(e,t){var n=this;return n.value=e,n.parent=t,n.isValid(ve),n},toggle:function(e){this.isValid(Xn(this.isValid(),e))},isValid:function(e){var t=this;return arguments[P]?(t.valid!==e&&(t.parent.increment(),t.valid=e),t):t.valid},valueOf:function(){return this.value},toString:function(){return this.value},generate:function(){return this.isValid()?this.valueOf():o}});we.StringManager=z.extend("StringManager",{Child:J,add:function(e){var t=this,n=t.get(l,e);return e&&(n?n.isValid(ve):(n=new t.Child(e,t),t.unwrap().push(n),t.register(l,e,n))),n},empty:function(){var e=this;return G[y][g].empty.call(e),e.current(o),e},increment:function(){this.changeCounter++},decrement:function(){this.changeCounter--},remove:function(e){var t=this,n=t.get(l,e);return e&&n&&n.isValid(me),t},toggle:function(e,t){var r=ve,i=this,o=i.get(l,e);o||(r=me,o=i.add(e)),t===n?r&&o.toggle():o.toggle(t)},rebuild:function(){var e=this,t=[],n=e.directive(T);return e.each(function(e){e.isValid()?this.push(e):n.drop(l,e.value)},t),e.reset(t),e},generate:function(e){var t=o,n=this,r=n.delimiter,i=e;return n.changeCounter||i!==r?(n.delimiter=i,n.rebuild(),t=n.join(i),n.current(t),t):n.current()},current:function(e){var t=this;return arguments[P]?(t.changeCounter=0,t.currentValue=e,t):t.currentValue},ensure:function(e,t){var r=this,i=e,o=t===n?u:t,a=ot(i),s=a?i.join(o):i;return r.current()===s?r:(r.load(a?i:Qe(i)?i.split(o):me),r.current(s),r)},refill:function(e){var t=this,n=e;return t.empty(),n&&t.load(n),t.increment(),t}});e.defineDirective(T,S[y])}),e.scope(function(e){var t=function(e,t){return this.hash[e]&&this.hash[e](t)},n=function(e){return function(){return e}},r=function(e,t){var r=this.hash;return Rn(e,t,function(e,t){r[e]=Mt(ze(t)?t:n(t),ye)}),this};e.defineDirective("Messenger",function(){return{hash:{},reply:r,request:t}})});var ae="dispatchEvent",Zr="EventManager",ei="stopListening",ti="talkerId",ni="listeningTo",ri="l",ii="handlers";e.scope(function(e){var t=function(e,t){var n=Qe(t)?e[t]:t;!ze(n)&&Jn({message:"handler must be a function or a string with a method on the originating object"});return n},n=function(e,t,n,r,i,o){return It(Ge(n),function(n){o(e,t,t.make(n,r,e),i)})},r=function(e,t,r,i){return function(o){var u,a,s=ve,c=this;return o?(u=wn(arguments),Rn(u[t],u[t+1],function(o,f,l){a=a||c.directive(Zr),s&&l&&u.splice(t,t+1,ye),u[t]=o,u[t+1]=f,s=me,u[P]<r&&i(c,u),n(c,a,o,f,u,e)}),c):c}},i=function(e,t){return function(n){return Gt(t,n[I].get(e))}},o=function(e,t){t.fn=function(n){n&&t.comparator(n)&&(t.triggersOnce&&e.detach(t),t.runner(n))}},a=function(e,t){return function(){var n,r,a,c,l,d,h,p,v=this,m={};return arguments[0]?(a=wn(arguments),c=e,r=a.slice(e),l=r[0],n=r[it(l)?2:3]||v,e&&!a[0]?m:(d=v.directive(Zr),p=e?a[0].directive(Zr):d,Rn(l,r[1],function(c,l,g){var y=c.split(u)[0],w=h||Mt(r[g?1:2],n||v),b=ze(l)?l:i(y,l),x=O+T+y,A=v,E=p.make(x,w,v);e+2<a[P]&&a.push(n),e&&s(v,d,E,a[0]),E.comparator=b,E.triggersOnce=!!t,E.runner=w,f(A,p,E,[r[0],r[2],r[3]],o),m[y]=w}),m)):m}},s=function(e,t,n,r){var i=m(e,r),o=r.directive(Zr);o[ii]=o[ii]||{};return i.count++,n.listening=i,o},c=function(e,t){var n=t.fn||t.handler;t.fn=Ft(function(r){return e.detach(t),n.apply(this,arguments)})},f=function(e,n,r,i,o){r.context=r.context||i[2],r.handler=t(e,r.handler),n.attach(r.name,r,o)},d=function(e,t,n,r){f(e,t,n,r,c)},h=function(e){return function(t,n){n[P]===e&&n.push(t)}},p=h(2),v=h(3),m=function(e,t){var n=e.directive(Zr),r=t.directive(Zr),i=r[ti],o=n[ni],u=o[i];return u?u:(n[ti]=n[ti]||cr(ri),u=o[i]={talker:t,talkerId:i,id:n[ti],listeningTo:o,count:0})},g=function(e,n,r,i,o){var u=i[0],a=s(e,n,r,u);r.handler=t(e,r.handler),f(u,a,r,i.slice(1),o)},y=function(e,t,n,r){g(e,t,n,r,c)},w="c";we.Events=we.Directive.extend("Events",{initialize:Me,bubble:zr.parody(Zr,"bubble"),on:r(f,0,3,p),once:r(d,0,3,p),listenTo:r(g,1,4,v),listenToOnce:r(y,1,4,v),watch:a(0),watchOnce:a(0,1),watchOther:a(1),watchOtherOnce:a(1,1),request:zr.parody("messenger","request"),reply:zr.parody("messenger","reply"),when:zr.parody("Linguistics","when"),constructor:function(e){var t=this;return pt(t,e),t[w+l]=t[w+l]||cr(w),t.on(Pn(t,"events")),t.initialize(e),t},off:function(e,t,r){var i,o,u=this,a=e,s=u[Zr];if(s)return i=it(a)?t:r,arguments[P]?a?Rn(a,t,function(e,t){n(u,s,e,t,[],function(e,t,n){var r=s[ii][n.name];return r&&s.seekAndDestroy(r,n.handler,i)})}):_t(s[ii],function(e,n){s.seekAndDestroy(e,t,i)}):(o=s[G].last(),o&&s.detach(o)),u},stopListening:function(e,t,n){var r,i,o,u,a=0,s=this,c=s[Zr];return c?(r=c[ni],(i=e&&!(u=e[Zr]))?s:(o=e?[u[ti]]:Ht(r),It(o,function(e){var i=r[e];i&&i.talker.off(t,n),a=i[e]?1:0}),a||Ct(e?Ht(r):o,function(e,t){return r[e]})||(c[ni]={}),s)):s},dispatchEvents:function(e){var t=this;return It(Ge(e),t.dispatchStack,t)&&t},dispatchStack:function(e){return this[ae](e)},dispatchEvent:function(e,t,n){var r,i,o=this,u=o[Zr];if(u&&!u.running[e]&&!u.queued[e])return r=u.create(o,t,e,n),i=u.dispatch(e,r)}})});var oi=lr(k+"ren");e.scope(function(e){var t=we.Collection,r=we.Events,i=we.List,o="sort",u="added",a="unwrap",s="removed",c="stopListening",f="_delegatedParentEvents",v="_parentDelgatedChildEvents",w=function(e,t){return B(e,t)},b=function(e,t){var n,r=er.result(e,k+"Events");t&&r&&(n=t.directive(Zr),n[v]=r,e.listenTo(t,r))},x=function(e,t){var r;t&&e[c]&&(r=t[Zr])&&r[v]&&(e[c](t,t[v]),r[v]=n)},A=function(e,t){var n,r=t[L],i=er.result(t,L+"Events");r&&i&&(n=t.directive(Zr),n[f]=i,t.listenTo(r,i))},E=function(e,t){var r;t[c]&&(r=t[Zr])&&r[f]&&(t[c](e,t[f]),r[f]=n)},S="Syncer",D=we[S]=we.Events.extend(S,{sync:function(){},destroy:function(){},fetch:function(){},update:function(){},create:function(){}}),C=(e.defineDirective(S,D[y]),we[oi]=we.Collection.extend(oi,{constructor:function(e){return this[M]=e,we.List[y].call(this),this},attach:function(e){var t=this,n=t[M],r=e[ae]&&e[ae](_+u);return t.detach(e),t.addToHash(e),A(n,e),b(n,e),r=e[ae]&&e[ae](u),e},detach:function(e){var t,n=this;return(t=e[L])?(e[ae](_+s),E(t,e),x(t,e),n.removeFromHash(e),delete e[L],e[ae](s),e):e},addToHash:function(e){var t=this,n=t[M];e[L]=n,t.add(e),t.register(l,e.id,e),t.register("cid",e.cid,e)},removeFromHash:function(e){var t=this;e&&(t.remove(e),t.unRegister(l,e.id),t.unRegister("cid",e.cid))},save:function(){},fetch:function(){}})),O=we.Parent=we.Events.extend("Parent",{Child:ve,isChildType:function(e){return qe(e,this.Child===ve?this.__constructor__[y]:this.Child)},add:function(e,n){var r,i=this,o=i.directive(oi),s=pt(Pn(i,k+"Options"),n||{}),c=t(e);return i.Child&&c[P]()?(c=c.foldl(function(e,t){var n=i.isChildType(t),u=i.Child===ve?i.__constructor__[y]:i.Child,a=n?t:new u(t,s),c=o.get(l,a.id);return c?(c.set(n?t[m]():t),a=c):(r=ve,o.attach(a)),e.push(a),e},[]),r&&i[ae](k+T+u),c):c[a]()},remove:function(e){var n,r,o,u=this,a=e;return a==ye?(u=u[L],u.remove(this)):(n=i(),!it(a)&&(r=u.directive(oi))&&(a=r.get(l,a)),a&&it(a)?(o=a&&a.unwrap?a.unwrap():a,t(o).each(function(e){var t,r,i=e[L];n.push(e),i&&(r=i[oi],t=r&&r.detach(e))}),n[P]()&&u[ae](k+T+s),n):n)},sort:function(e){var t,n,r,i,u=this;return(t=u[oi])?(n=e||Pn(u,"comparator"),Qe(n)&&(i="!"===n[0],r=n,i&&(r=n.slice(1)),n=function(e,t){var n,o=e.get(r),u=t.get(r);return n=i?u-o:o-u}),t[o](n),u[ae](o),u):u},destroy:function(){var e,t=this;return t.is(p)||t[ae](h),e=t[L]&&t[L].remove(t),t[ae](d),t.stopListening(),t}}),I=0,V=function(e,t){return e.id=t===n?++I:t,I},B=we.Model=we.Parent.extend("Model",{idAttribute:l,unset:zr.checkParody(j,"unset",me),get:zr.checkParody(j,"get"),has:zr.checkParody(j,"has",me),constructor:function(e,t){var n=this;return n.reset(e),r[y].call(this,t),n},reset:function(e){var t,n=this,r=dn(e)||{},i=Pn(n,"defaults",r),o=pt(i,r),u=Pn(n,"idAttribute",o),a=(V(n,o[u]),Ht(o),n.directive(j));return(t=n.is(R))&&n[ae](_+R),a[R](o),t&&n[ae](R,o),n.mark(R),n},destroy:function(){return O[y][g].destroy.call(this),delete this.id,this},set:function(e,t){var n,r=[],i=this,o=i.directive(j);return Rn(e,t,function(e,t){o.set(e,t)&&!o.changing[name]&&(n=n||i.directive(Zr),n.queueStack(N+e),r.push(e))}),r[P]?(o.digest(i,function(){It(r,function(e){var t=N+e;o.changing[e]=ve,n.unQueueStack(t),i[ae](t),o.changing[e]=me})}),i):i},toJSON:function(){return this.clone()},clone:zr.checkParody(j,"clone",function(){return{}}),valueOf:function(){return this.id},toString:function(){return Le(this)}});e.defineDirective(oi,C[y]),w[y]=B[y]});var ui="actions",ai="isStopped",si=lr(ai),ci="propagation",fi="defaultPrevented",li=ci+si,di="immediate"+lr(ci)+si;e.scope(function(e){var t=e._,r=t.factories,i=1,o=r.Collection,u=r.List,a=0,s=function(){return this.id},c="passedData",f=r.ObjectEvent=r.Directive.extend("ObjectEvent",{constructor:function(e,t,n,r,i){var o=this;return o[li]=o[di]=me,o[I]=e,o[b]=n,o[x]=n.split(T)[0],o.timestamp=ft(),o.timeStamp=i||o.timestamp,o[c]={},o.data(t),r&&pt(o,r),o},isStopped:function(){return this[li]||this[di]},data:function(e){return arguments[P]?this.set(e):this[c]},get:function(e){return this[c][e]},set:function(e){var t=this;return t[c]=it(e)?e:{},t},stopImmediatePropagation:function(){this.stopPropagation(),this[di]=ve},stopPropagation:function(){this[li]=ve},preventDefault:function(){this[fi]=ve},defaultIsPrevented:function(){return this[fi]},action:function(e){var t=this;return t.directive(ui).push(e),t},finished:function(){var e,t=this;t.isTrusted=me,t.defaultIsPrevented()||(e=t[ui])&&e.call(t)}});r.EventsDirective=r.Directive.extend("EventsDirective",{cancelled:t.noop,constructor:function(e){var t=this;return t.target=e,t.listenId="l"+ ++a,t.handlers={},t.listeningTo={},t.running={},t.queued={},t.stack=u(),t.removeQueue=u(),t.proxyStack=o(),t.proxyStack.unmark("dirty"),t},attach:function(e,t,n){var r,o=this,a=o[ii];t.id=++i,t.valueOf=s,t.context=t.context||t.origin,n&&ze(n)&&n(o,t),t.fn=Mt(t.fn||t.handler,t.context),r=a[e]=a[e]||u(),r[b]=e,t.list=r,o.add(r,t)},create:function(e,t,n,r){return f(e,t,n,r)},make:function(e,t,n){return{disabled:me,namespace:e&&e.split(T)[0],name:e,handler:t,origin:n}},seekAndDestroy:function(e,t,n){for(var r,i=this,o=e.unwrap(),u=o[P]-1;u>=0;u--)r=o[u],r.disabled||t&&r.handler!==t||n&&r.context!==n||i.detach(r,u)},nextBubble:function(e){return e.parent},bubble:function(e,t,n){for(var r,i=this,o=i.target,u=[o],a=o;a;)r=a,a=i.nextBubble(r,u),a&&u.push(a),r===a&&Jn({message:"bubbling discerners must return a different object each time it is run"});return It(u,function(r){r[ae](e,t,n)}),o},add:function(e,t){e.push([t])},remove:function(e,t,n){e.removeAt(t,n)},detachCurrent:function(){return this.detach(this[G].last())},detach:function(e,t){var r,i=this,o=e.listening,u=e.list;e.disabled=ve;return e.removed?ve:(e.removed=ve,i.remove(u,e,t),e.list=n,i.wipe(u),o?(o.count--,o.count?ve:(r=o.listeningTo,r[o[ti]]=n,ve)):ve)},wipe:function(e){return e[P]()?me:(this.scrub(e),ve)},scrub:function(e){e.scrubbed=ve,delete this[ii][e[b]]},reset:function(){return _t(this.handlers,this.scrub,this)},queue:function(e,t,n){return e.unwrap().push(t)},unQueue:function(e,t,n){return e.pop()},has:function(e){return this.handlers[e]&&this.handlers[e][P]()},dispatch:function(e,t){var n,r,i,o=0,u=this,a=u[G],s=u[ii],c=s[e],f=u.running,l=f[e],d=t[li];u.proxyStack;if(!l&&!d&&c&&c[P]()){for(f[e]=ve,n=u.subset(c.unwrap(),t),r=n[P];r>o&&!d;o++)i=n[o],!i.disabled&&u.queue(a,i,t)&&(i.fn(t),d=!!t[di],u.unQueue(a,i,t));return d&&u.cancelled(a,t),t.finished(),f[e]=!!l,t.returnValue}},subset:function(e){return e.slice(0)},queueStack:function(e){var t=this.queued;return t[e]||(t[e]=0),++t[e],t[e]},unQueueStack:function(e){--this.queued[e]||delete this.queued[e]}});e.defineDirective(Zr,r.EventsDirective[y])}),e.scope(function(e){var t=e._,r=Ue(s),i=t.factories,o="counter",u="changing",a=i.DataDirective=i.Directive.extend("DataDirective",{constructor:function(){var e=this;return e[w]={},e.previous={},e[u]={},e[o]=0,e},set:function(e,t){var n=this,r=n[w];return Gt(r[e],t)?me:(n.previous[e]=r[e],n[w][e]=t,ve)},get:function(e){return this[w][e]},clone:function(){return $t(this[w])},unset:function(e){var t=this[w],r=t[e];return delete t[e]&&r!==n},reset:function(e){this[w]=e||{}},digest:function(e,t){var n=this;++n[o],t(),--n[o],n[o]||(e[ae](O,n[u]),n[u]={},n.previous={})},getDeep:function(e){var t,i=this,o=i[w];return It(r(e),function(e,n,r){var i=n===r[P];t=e,i||(o=it(o[e])?o[e]:{})})&&(Qe(t)?n:o[t])},has:function(e){return this[w][e]!==n},each:function(e){return _t(this[w],e,this)}});e.defineDirective(j,a[y])}),e.scope(function(e){var t=e._,n=t.factories,r=n.Collection,i="success",o="registered",u="state",a="every",s="failures",c="counter",f="groupIndex",l="Linguistics",d=function(e){return function(t){return Gt(t,e)}},h=function(e){return function(t){return t>e}},p=function(e){return function(t){return e>t}},v=function(e){return function(t){var n=this;return n[e].push(Mt(t,n)),n}},m=function(e,t){return function(){var n=this;return It(arguments,function(r){n.add(r,e,t)}),n}},g=m(ve),b=function(e,n,r,i){var o=Mt(r,e),u=i?t.negate(o):o;return{key:n,context:e,handler:r,fn:u}},x=function(){this.stopListening()},A=n.Linguistics=n.Events.extend(l,{then:v(i),always:v(a),otherwise:v(s),is:m(),isnt:g,isNot:g,isGreaterThan:m(me,h),isLessThan:m(me,p),isNotGreaterThan:m(ve,h),isNotLessThan:m(ve,p),constructor:function(e){var t=this;return t.origin=e,t[c]=0,t[f]=-1,t[o]={},t.logic=new r[y],t[i]=new r[y],t[s]=new r[y],t[a]=new r[y],t.group(),t.listenTo(t.origin,{change:"apply",destroy:x}),this},when:function(e){return this[L]?this[L].when(e):Jn({message:"this sequencer has been destroyed"})},and:function(e){var t=this;return t[w]=e,t.bind(e),t},or:function(e){return this.group(),this.and(e),this},group:function(){var e=this;return++e[f],e.logic.push({index:e[f],list:new r[y]}),e},increment:function(){++this[c]},bind:function(e){var t=this,n=t[o];n[e]||(n[e]=ve,this.listenTo(this.origin,N+e,t.increment))},unbind:function(e){var t=this,n=t[o];n[e]&&(n[e]=me,this[ei](this.origin,N+e,t.increment))},value:function(e,t){return ze(e)?e:t(e)},add:function(e,t,n){var r=this,i=r[w],o=r.value(e,n||d),u=b(r,i,o,t);return r.logic.index(r[f]).list.push(u),r},check:function(){var e=this;return!(!e[c]||!e.logic.find(function(t){return!t.list.find(function(t){return!t.fn(e.origin.get(t.key))})}))},restart:function(){return this[c]=0,this},handle:function(e,t){var n=this;n[e]&&n[e].call(t);return n},run:function(){var e=this;e[u]?e.handle(i):e.handle(s),e.handle(a)},apply:function(){var e=this,t=e.check();return e.restart(),e[u]!==t&&(e[u]=t,e.run()),e}}),E=l+"Manager",k=n[E]=n.Model.extend(E,{when:function(e){var t=new A[y](this.target);return this.add(t),t.and(e)},constructor:function(e){return this.target=e,this}});e.defineDirective(l,k[y])}),e.scope(function(e){var t=e._,n=t.factories,r="failure",i="success",o="pending",u="state",a="error",s="always",c="fulfilled",f="settled",l="rejected",d="emptying",h="allStates",p="stashedArgument",v="stashedHandlers",m=t.flatten,w=t.bind,b=t.isString,x=t.intendedObject,A=t.duff,E=(t.each,t.extend),k=t.toArray,T=t.isFunction,S=(t.foldl,t.result),D=t.wraptry,C=(t.indexOf,function(e){var t,n,r=this,i=r[p],o=r[v][e];if(o&&o[P]){for(n=o[P],r.mark(d);o[0]&&--n>=0;)(t=o.shift())(i);r.unmark(d)}return r}),O=function(e,n){for(var o,u=n,a=S(e,h),s=[];!o;)-1!==t.indexOf(s,u)?u=me:(u===i&&(e.mark(c),e.unmark(l)),u===r&&(e.unmark(c),e.mark(l)),u=a[u]&&t.add(s,u)?a[u]:me),o=!b(u);return s[P]?A(s,C,e):Jn({message:"promise cannot resolve to an unknown state"})},M=function(e){return this[e]||(this[e]=function(){return this.handle(e,k(arguments))}),this},I=n.Model,_=function(){var e,t=ve,n=this,o=n.directive(Jr),u=[],a=o.find(function(n){return e=e||n.is(l),t=t&&n.is(f),u.push(n[p]),e});return e?n.resolveAs(r,a[p]):t&&n.resolveAs(i,u),n},N=function(){var e,t=this,n=t.directive(Jr);return(e=n.find(function(e){return e.is(f)}))&&t.resolveAs(e[u],e[p]),t},R={success:s,failure:s,error:s,always:ve},j=function(e,t){var n=e.directive(Jr);m(t,ve,function(t){e.isChildType(t)&&(n.add(t),n.register("cid",t.cid,t))})},L=function(e,t){var n=w(t,e),r=e.directive(Jr);r.each(function(e){r.get("listening",e.cid)||(r.register("listening",e.cid,ve),e.always(function(){n()}))})},V=n.Promise=t.Promise=I.extend("Promise",{addHandler:M,"constructor:Model":I[y],constructor:function(){var e=this;return e.state=o,e[p]=ye,e[v]={},e.reason=me,e[y+":Model"](),x(E({},R,S(e,"associativeStates")),ye,M,e),e.success(arguments),e},isChildType:function(e){return e[i]&&e[r]&&e[s]&&e[a]},auxiliaryStates:function(){return me},allStates:function(){return E({},R,S(this,"auxiliaryStates")||{})},resolveAs:function(e,t,n){var i=t,o=e,u=this;return u.is(f)?u:(u.mark(f),u.state=o||r,u[p]=i,u.reason=n?n:me,o=u.state,u.dispatchEvent("before:resolve"),u.dispatchEvents(D(function(){return O(u,o)},function(e){return u.unmark(c),e.options=i,u[p]=e,O(u,a)},function(e,t){return t||[]})),u)},fulfill:function(e){return this.resolveAs(i,e)},resolve:function(e){return this.fulfill(e)},reject:function(e,t){return this.resolveAs(r,e,t)},stash:function(e,t){var n=this,r=n[v];return x(e,t,function(e,t){var i=r[e]=r[e]||[];m(T(t)?[t]:t,ve,function(e){T(e)&&i.push(w(e,n))})}),n},handle:function(e,t){var n=this,r=(n[p],t);return n.stash(e,r),n.is(f)&&O(n,n[u]),n},when:function(){return this.all(arguments)},all:function(){var e=this;return e[u]!==o?e:(j(e,arguments),L(e,_),e)},race:function(){var e=this;return e[u]!==o?e:(j(e,arguments),L(e,N),e)},then:function(e){return this.handle(s,e)}}),B=V[y][g],H=(B.addHandler(i).addHandler(r).addHandler(s).addHandler(a),V());e.extend({dependency:w(H.all,H)})}),e.scope(function(e){var t=e._,r=t.factories,i="items",o=t.extend,u=t.isObject,a=t.removeAt,s={}.toString;r.Associator=r.Directive.extend("Associator",{get:function(e,t){var r,o,a=this,s={},c=u(e),f=a.sameType(e,c),l=(f[i]=f[i]||[],f[ne]=f[ne]||{}),d=f[j]=f[j]||[];return c?e&&f.readData?(o=e[ne]=e[ne]||cr("el"),o&&(s=l[o]=l[o]||{})):(r=f[i][U](e),r!==n&&-1!==r||(r=f[i][P],f[i].push(e),d[r]=s),s=d[r]):(f[ne][e]=f[ne][e]||{},s=f[ne][e]),s.target=e,s},set:function(e,t,n){var r=this.get(e,n);return o(r,t||{}),r},remove:function(e){var n,r=this.sameType(e);r.readData?(n=e[ne],delete r[ne][n]):(n=t[U](r[i],e),-1!==n&&(a(r[j],n),a(r[i],n)))},sameType:function(e,t){var r=this,i=t===n?u(e):t,o=s.call(e),a=e&&e.window===e,c=a?"[object global]":o.toLowerCase(),f=r[c]=r[c]||{},l=c[U]("global"),d=-1===c[U](F);return-1===l&&d&&i&&(f.readData=ve),f}})}),e.scope(function(e){var t=e._,n=t.factories,i="error",u="status",a="failure",s="success",c="readyState",f=r.XDomainRequest,l=t.stringifyQuery,d="GET",h=Ge(d+" POST PUT DELETE HEAD TRACE OPTIONS CONNECT"),p=Ge("progress timeout abort "+i),v=function(e){var t=0,n=e.requestObject;It(p,function(r){"progress"===r?n["on"+r]=function(n){t++,e.dispatchEvent("progress",{percent:n.loaded/n.total||t/(t+1),counter:t},{originalEvent:n})}:n["on"+r]=function(t){e.resolveAs(r)}})},m=function(e,t,n){return function(){Qn(function(){e.send.apply(e,t)},function(e){n.resolveAs(i,e,e.message)})}},g=function(){var e=this,t=e.requestObject,n=e.get("type"),r=e.getUrl(),i=[],o=e.get("data");r&&(e.attachResponseHandler(),t.open(n,r,e.get("async")),o&&i.push(Le(o)),e.headers(e.get("headers")),v(e),setTimeout(m(t,i,e)))},w=n.HTTP=n.Promise.extend("HTTP",{parse:dn,constructor:function(e,r){var i,u,a,s,c=this,l="onreadystatechange";return s=new XMLHttpRequest,t.isUndefined(f)||(s=new f,l="onload"),t.isObject(e)||(e=e||o,a=d,u=e.toUpperCase(),-1!==_e(h,u)?a=u:i=e,e={url:i||o,type:a}),e.async=ve,e.type=(e.type||d).toUpperCase(),e.method=l,n.Promise[y].call(c),c.on("change:url",g),pt(c,r),c.requestObject=s,c.set(e),c},status:function(e,t){return this.handle(u+T+e,t)},headers:function(e){var t=this,n=t.requestObject;return _t(e,function(e,t){n.setRequestHeader(t,e)}),t},getUrl:function(){var e=this.get("url");return it(e)&&!ot(e)&&(e=l(e)),e},auxiliaryStates:function(){return{"status:0":a,"status:200":s,"status:202":s,"status:205":s,"status:302":s,"status:304":s,"status:400":a,"status:401":a,"status:403":a,"status:404":a,"status:405":a,"status:406":a,"status:500":i,"status:502":i,"status:505":i,"status:511":i,timeout:a,abort:a}},attachResponseHandler:function(){var e=this,t=e.requestObject,n=me,r=e.get("method"),i=function(t){var i,o,a,s=this;s&&!n&&(i=s[u],a=s.responseText,("onload"===r||"onreadystatechange"===r&&4===s[c])&&(e.set(u,i),o=Pn(e,"allStates"),a=Pn(e,"parse",a),n=ve,e.resolveAs(u+T+s[u],a)))};return t[r]||(t[r]=i),e}});t.foldl(h,function(e,n){var r=n;return r=r.toLowerCase(),e[r]=function(e,r){return w(t.extend({type:n,url:e},r))},e},w)}),e.scope(function(e){var t=e._,r=t.factories,i=r.Model,o=(r.Collection,z+"ed"),u="initialized",a="defined",c={start:function(e){var t=this;return t.is(o)||(t.mark(o),t[ae](z,e)),t},stop:function(e){var t=this;return t.is(o)&&(t.unmark(o),t[ae](J,e)),t},toggle:function(e){var t=this;return t.is(o)?t[J](e):t[z](e),t},restart:function(e){var t=this;return t.is(o)&&t[J](e),t[z](e),t}},f=(r.Startable=r.Model.extend("Startable",c),function(e){this.startWithParent&&this[z](e)}),d=function(e){this.stopWithParent&&this[J](e)},h=function(e,t){return[e].concat(e.application.createArguments(),t||[])},p=function(e,t){var n=[];return It(t,function(t){var r=e.module(t);r.is(u)&&n.push(r.exports)}),n[P]===t[P]?n:me},v=t.Promise,m={module:function(t,n,r){var i,o,c,f,d,h=this,p=t,m=p.split(s),g=h.directive(oi).get(t),y=function(){g.mark(a),g.parent.bubble(u+":submodule")};if(g){if(h=g.parent,!r)return g;m=[g.id]}else for(;m.length>1;)h=h.module(m[0]),m.shift();return d=h.directive(oi),p=m.join(s),g=d.get(l,p),g||(o=h.globalname?h.globalname.split("."):[],o.push(p),c=o.join("."),f=pt(Pn(h,"childOptions")||{},{application:e,parent:h,id:p,globalname:c}),h===e?(g=b({},f),d.add(g)):g=h.add({},f)[0],d.register(l,p,g),e[oi].register(l,c,g)),(vi(n)||ze(n)||ze(r))&&(g.exports=g.exports||{},g.mark(u),i=g.run(n,r),i&&qe(i,v)?i.success(y):y()),g},run:function(e,t){var r,i=this,o=ze(e)?e:t,u=vi(e)?[e.DOMA]:[];return ze(o)&&(r=i.application?o.apply(i,h(i,u)):o.apply(i,i.createArguments(u))),r===n?i:r},"export":function(e,t){var n=this;return Rn(e,t,function(e,t){n.exports[e]=t}),n},constructor:function(e,t){var n=this;return n.startWithParent=ve,n.stopWithParent=ve,n.exports={},i[y].apply(n,arguments),n.listenTo(n.parent,{start:f,stop:d}),n},topLevel:function(){return!this.application||this.application===this[L]},require:function(e,n){var r,i,o,s,c=this;return ze(n)?(r=t.Promise(),o=Ge(e),ot(o)&&o[P]?(o=o.slice(0),r.success(Mt(n,c)),(s=p(c,o))?r.fulfill(s):c.application.on(u+":submodule",function(){(s=p(c,o))&&(c.off(),r.fulfill(s))}),r):r):(i=c.module(e),i.is(a)?i.exports:Jn({message:"that module has not "+a+" initialization yet"}))}},w=[],b=r.Module=r.Model.extend("Module",m),x=function(e){var t=e._;return[e,t,t&&t.factories]};e.extend(pt({},r.Events[y][g],c,m,{addModuleArguments:function(e){return t.addAll(w,e),this},removeModuleArguments:function(e){return t.removeAll(w,e),this},createArguments:function(e){return x(this).concat(w,e||[])}}))});var hi="attached",pi="iframe",vi=function(e){return e&&e===e[F]};e.scope(function(e){var t=e._,s="Attributes",c=t.factories,d=c.Collection,h=c.Associator(),p="DomManager",v="nodeType",w="destroyed",x="custom",A="removing",k="accessable",C=x+"Listener",I="localName",_="Child",N="append"+_,R="remove",L="parentNode",V="innerHTML",B="innerText",H="outerHTML",q="attributeChange",U="attributesChanging",G="delegateCount",$="captureCount",z=j+a+x,J="["+z+"]",se=Q+a+b,ce="fontSize",fe="defaultView",le="div",de=r.devicePixelRatio||1,ge=function(e,t){var n;return n=t===ve?h.get(e):t.data.get(e),n[p]||(n[p]=xi(e,n,t)),n[p]},we=/(.)^/,be={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},xe=/\\|'|\r|\n|\u2028|\u2029/g,Ae=function(e){return"\\"+be[e]},Ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ke=st(Ee),Te=function(e){var t=function(t){return e[t]},n="(?:"+Ht(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=e==ye?o:o+e,r.test(e)?e.replace(i,t):e}},Se=Te(Ee),De=Te(ke),Ce=function(e,n){var r=pt({},n),i=RegExp([(r.escape||we).source,(r.interpolate||we).source,(r.evaluate||we).source].join("|")+"|$","g"),o=0,u="__HTML__+='";e.replace(i,function(t,n,r,i,a){return u+=e.slice(o,a).replace(xe,Ae),o=a+t.length,n?u+="'+\n((__t=(this."+n+"))==null?'':_.escape(__t))+\n'":r?u+="'+\n((__t=(this."+r+"))==null?'':__t)+\n'":i&&(u+="';\n"+i+"\n__HTML__+='"),t}),u+="';\n",u="var __t,__HTML__='',__j=Array.prototype.join,print=function(){__HTML__+=__j.call(arguments,'');};\n"+u+"return __HTML__;\n";var a=t.wraptry(function(){return new Function[y](r.variable||"_",u)},zn.error),s=function(e){return a.call(e||{},t)},c=r.variable||"obj";return s.source="function("+c+"){\n"+u+"}",s},Oe=function(e,t,n){var r,i=n.templates=n.templates||d(),o=i.get(l,e);return o?o:(r=t||n.$("#"+e).html(),o=Ce(r,n.templateSettings),o.id=e,i.push(o),i.register(l,e,o),o)},Ie=function(e){return!(!e||!tt(e[v])||e[v]!==e.ELEMENT_NODE)},Ne=function(e){return e&&tt(e[v])&&e[v]===e.DOCUMENT_NODE},Re=function(e){return e&&e[v]===i.DOCUMENT_FRAGMENT_NODE},je=function(e){var t=e||r;return vi(t)?t:t&&t[fe]?t[fe]:t.ownerGlobal?t.ownerGlobal:Bi(t).parent(F)[ie](0)||r},Pe=function(e,t){var n=je(t).getComputedStyle(e);return n?n:je(e).getComputedStyle(e)||$t(e[he])||{}},He=Pe(i[pe],r),qe=/^key/,Ue=/^(?:mouse|pointer|contextmenu)|click/,Fe=/^device/,We=/^webkitmouseforce/,$e=(function(){var e=4,t=ve,n=[],r=function(r){return function(){e--,r(),e||(It(n,function(e){e(t)}),n=[])}};return It(["UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA","UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==","UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==","UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"],function(e){var n=new Xt;n.onload=r(Me),n.onerror=r(function(){t=me}),n.src="data:image/webp;base64,"+e}),function(r){e&&t?n.push(r):r(t)}}(),function(e,t,n){n===me||n==ye?Xe(e,t):e.setAttribute(t,(n===ve?o:Le(n))+o)}),Je=function(e,t){var n=e.getAttribute(t);return mr(n)},Xe=function(e,t){e.removeAttribute(t)},Ye={preventUnCamel:me,read:Je,write:$e,remove:Xe},Ke=me,et=function(e){return function(){var t,n=Ke;return Ke=ve,t=e.apply(this,arguments),Ke=n,t}},nt=function(e,t){var n=t||e;return et(function(e){var t=e.element();Ot[n]&&ze(t[n])?t[n]():e[ae](n)})},ot=function(e,t){var n=e||t,r=nt(n,t);return function(e,t,i){var o=this;return ze(e)||ze(t)?o.on(n,e,t,i):r(o),o}},ut=Ge("abort afterprint beforeprint blocked cached canplay canplaythrough change chargingchange chargingtimechange checking close complete dischargingtimechange DOMContentLoaded downloading durationchange emptied ended error fullscreenchange fullscreenerror input invalid languagechange levelchange loadeddata loadedmetadata message noupdate obsolete offline online open pagehide pageshow paste pause pointerlockchange pointerlockerror play playing ratechange reset seeked seeking stalled storage submit success suspend timeupdate updateready upgradeneeded versionchange visibilitychange"),at=Ge("SVGAbort SVGError SVGLoad SVGResize SVGScroll SVGUnload SVGZoom volumechange waiting"),ct=Ge("keydown keypress keyup"),lt=Ge("gamepadconnected gamepadisconnected"),dt=Ge("compositionend compositionstart compositionupdate drag dragend dragenter dragleave dragover dragstart drop"),ht=Ge("click contextmenu dblclick mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup show wheel"),vt=Ge("touchcancel touchend touchenter touchleave touchmove touchstart"),mt=Ge("devicemotion deviceorientation deviceproximity devicelight"),gt=Ge("blur focus"),yt=Ge("beginEvent endEvent repeatEvent"),wt=Ge("animationend animationiteration animationstart transitionend"),xt=Ge("audioprocess complete"),At=Ge("abort error hashchange load orientationchange readystatechange resize scroll select unload beforeunload"),Et=Ge("abort error load loadend loadstart popstate progress timeout"),kt=en(ut,at,ct,dt,lt,ht,vt,mt,gt,yt,wt,xt,At,Et),Tt=Ge("-o- -ms- -moz- -webkit- mso- -xv- -atsc- -wap- -khtml- -apple- prince- -ah- -hp- -ro- -rim- -tc-"),St=Ge("a abbr address area article aside audio b base bdi bdo blockquote body br button canvas caption cite code col colgroup data datalist dd del dfn div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hr html i iframe img input ins kbd keygen label legend li link main map mark meta meter nav noscript object ol optgroup option output p param pre progress q rb rp rt rtc ruby s samp script section select small source span strong style sub sup table tbody td template textarea tfoot th thead time title tr track u ul var video wbr"),Dt=Jt(St,ve),Ot=Jt(kt,ve),Nt=(Jt(Tt,ve),c.StringManager),jt=function(e,t){return e[t]},Lt=function(e,t,n){e[t]=n},Pt=function(e,t){e[t]=ye},Vt={preventUnCamel:ve,read:jt,write:Lt,remove:Pt},Bt=function(e,t,n){var r=wi(e,t);return r.ensure(n===ve?o:n,u)},qt=function(e,t){var n=e.getBoundingClientRect(),r=Pe(e,t.element()),i=Zt(r.marginTop),o=Zt(r.marginLeft),u=Zt(r.marginRight),a=Zt(r.marginBottom);return{height:n[re]+i+a,width:n[te]+o+u,top:n[Y]-i,left:n[K]-o,right:n[K]+n[te]+u,bottom:n[Y]+n[re]+a}},Ut={columnCount:ve,columns:ve,fontWeight:ve,lineHeight:ve,opacity:ve,zIndex:ve,zoom:ve,animationIterationCount:ve,boxFlex:ve,boxFlexGroup:ve,boxOrdinalGroup:ve,flex:ve,flexGrow:ve,flexPositive:ve,flexShrink:ve,flexNegative:ve,flexOrder:ve,lineClamp:ve,order:ve,orphans:ve,tabSize:ve,widows:ve,fillOpacity:ve,stopOpacity:ve,strokeDashoffset:ve,strokeOpacity:ve,strokeWidth:ve},Wt={transitionDuration:ve,animationDuration:ve,transitionDelay:ve,animationDelay:ve},Gt=function(){var e,t,n,r,i,u,s,c,f,l,d=[],h={},p=0,v=function(e,t){-1===_e(e,u)&&e.push(u)};for(e=0;e<Tt[P];e++)l=Tt[e][P],l>p&&(p=l);for(n in He){for(r=0,c=o,u=o,s=tt(+n)?He[n]:dr(n),dr(s),fr(s),f=s,t=0;p>t&&s[t]&&!r;t++)c+=s[t],i=_e(Tt,c),-1!==i&&(u=Tt[i],f=s.split(u).join(o),r=1),i=_e(Tt,a+c),-1!==i&&(u=Tt[i],f=s.split(c).join(o),r=1);f=fr(f),d.push(f),h[f]||(h[f]=[]),v(h[f],u)}return h}(),zt=function(e,t){return+t!==+t?t:Wt[e]?t+"ms":Ut[e]?t:t+f;
},Qt=function(e,t){var n,r,i={};return Ie(e)?(r=Pe(e,t),n=Yt(e,t),{borderBottom:+r.borderBottomWidth||0,borderRight:+r.borderRightWidth||0,borderLeft:+r.borderLeftWidth||0,borderTop:+r.borderTopWidth||0,paddingBottom:+r.paddingBottom||0,paddingRight:+r.paddingRight||0,paddingLeft:+r.paddingLeft||0,paddingTop:+r.paddingTop||0,marginBottom:+r.marginBottom||0,marginRight:+r.marginRight||0,marginLeft:+r.marginLeft||0,marginTop:+r.marginTop||0,computedBottom:+r[ee]||0,computedRight:+r[Z]||0,computedLeft:+r[K]||0,computedTop:+r[Y]||0,top:n[Y]||0,left:n[K]||0,right:n[Z]||0,bottom:n[ee]||0,width:n[te]||0,height:n[re]||0}):i},Yt=function(e){var t=Ie(e)?e.getBoundingClientRect():{};return{top:t[Y]||0,left:t[K]||0,right:t[Z]||0,bottom:t[ee]||0,width:t[te]||e.clientWidth||0,height:t[re]||e.clientHeight||0}},Zt=function(e,t){return+e.split(t||"px").join(o).trim()||0},tn=function(e,t,n){var r,i;return it(e)?(i=Ie(e)?Pe(e,n):e,r=i[t]):r=e,Qe(r)&&(r=Zt(r)),r},nn={":even":function(e,t){return t%2},":odd":function(e,t){return(t+1)%2}},rn={"in":function(e,t,n,r){return e/96},vh:function(e,t,n,r){return e/n[oe]*100},px:function(e,t,n,r){return e},cm:function(e,t,n,r){return e/37.79527559055118},vw:function(e,t,n,r){return e/n[ue]*100},em:function(e,t,n,r){return e/tn(t,ce,n)},mm:function(e,t,n,r){return e/3.779527559055118},vmin:function(e,t,n,r){var i=Math.min(n[oe],n[ue]);return e/i*100},rem:function(e,t,n,r){return e/tn(n[W][pe][L],ce,n)},pt:function(e,t,n,r){return e/1.333333333333333},vmax:function(e,t,n,r){var i=Math.max(n[oe],n[ue]);return e/i*100},"%":function(e,t,n,r){var i=Ie(t)?t[L]:t,o=tn(i,r,n);return e/o*100},pc:function(e,t,n,r){return e/16}},on={"in":function(e,t,n,r){return 96*e},vh:function(e,t,n,r){return n[oe]*e/100},px:function(e,t,n,r){return e},cm:function(e,t,n,r){return 37.79527559055118*e},vw:function(e,t,n,r){return n[ue]*e/100},em:function(e,t,n,r){return tn(t,ce)*e},mm:function(e,t,n,r){return 3.779527559055118*e},vmin:function(e,t,n,r){return(Math.min(n[oe],n[ue])||1)*e/100},rem:function(e,t,n,r){return tn(n[W][pe][L],ce)*e},pt:function(e,t,n,r){return 1.333333333333333*e},vmax:function(e,t,n,r){return(Math.max(n[oe],n[ue])||1)*e/100},"%":function(e,t,n,r){var i=Ie(t)?t[L]:t,o=tn(i,r);return e*o/100},pc:function(e,t,n,r){return 16*e}},un=function(e,t){var n;return e&&Ie(e)?(n=e[I].toLowerCase(),t?n===t.toLowerCase():n):me},an=function(e,t,n,r){var i,o,u=r&&r.element(),a=r&&r.registeredElements,s=a&&a[e],c=s===ve?e:s;return c||Jn({message:"custom tag names must be registered before they can be used"}),i=u.createElement(c),s&&s!==ve&&Ye.write(i,z,e),o=r.returnsManager(i),t&&o.attr(t),n?(Qe(n)?o.html(n):bt(n)?Xr(wn(n),"appendTo",o):o.append(n),o):o},sn=function(e,t){var n=an(le,ye,ye,t);return n.html(e),Bi(n).children().remove().unwrap()},cn=function(e,t){return sn(e,t)[0]},fn=function(e,t){var n,r;return t&&e&&1===e[v]?(r=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector)?r.call(e,t):(n=e[L],n||(n=an(le,ye,ye,ge(e.ownerDocument,ve)),n[N](e)),-1!==_e(qr(t,n),e)):me},ln=function(e,t){return t.isDocument&&t.element().createDocumentFragment()},hn=function(e,t,n){var r=[];return r.concat.apply(r,n?mn(n,t):e.map(t))},pn=function(e,t){return Bi(Un(Ge(e),function(e,n){return e.push(an(n,ye,ye,t)),e},[]),ye,ye,ye,t)},vn=function(e,t){var n,r=e;return Re(r)?n=r:(Bi.isInstance(r)&&(r=r.unwrap()),bt(r)||(r=r&&wn(r)),n=t.createDocumentFragment(),It(r,function(e){var r,i=t.returnsManager(e),o=i.element();i.isElement&&!i.isFragment&&(r=o[L],r&&!Re(r)&&or([o],t),n[N](o))})),n},gn=function(e){return function(t){var n=this;return Qe(t)?n.eachCall(e,t)&&n:n.map(Wn.bind(ye,e)).join(o)}},yn=function(e,t){return xn(function(n,r){var i=[],o=n.unwrap(),u=t||r;return u?n.duff(function(t){(traversal=t[e](u))&&add(i,traversal)}):i=o,i})},bn=function(e){var t="data-",n=dr(e),r=e.slice(0,5);return t!==r&&(n=t+e),n},xn=function(e){return function(t,n,r,i,o){var u=this,a=e(u,t,n,r,i,o),s=new Bi[y](a,ye,ve,ye,u.context.owner);return s._previous=u,s}},An=function(e,t){var n=Yt(e),r=n[ee],i=n[Z],o=n[K],u=n[Y],a=t.x,s=t.y,c=me;return a>o&&i>a&&s>u&&r>s&&(c=ve),c},En=function(e){return{x:e[K]+e[te]/2,y:e[Y]+e[re]/2}},kn=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},Tn=function(e,t,n){return kn(e,t)<kn(e,n)},Sn=function(e,t,n){var r,i,o,u,a=t.shift();return(Qe(t[0])||t[0]==ye)&&(i=t.shift()),Qe(t[0])&&(t[0]=e[t[0]]),ze(t[0])?(r=t.shift(),o=t.shift(),Qe(o)?(u=o,o=me):o=!!o,u=t.shift(),n(e,a,i,r,o,u),e):this},Dn=function(e){return function(){var t,n=this,r=wn(arguments),i=r.shift();return it(i)?(Qe(r[0])&&(t=r.shift()),_t(i,function(i,o){Sn(n,[o,t,i].concat(r),e)}),n):(r.unshift(i),Sn(n,r,e))}},Cn=function(e,t,n){return e&&it(e)&&!vi(e)&&tt(e.AT_TARGET)?e:{data:Le(e),type:n,bubbles:me,eventPhase:2,cancelable:me,defaultPrevented:me,isTrusted:me,timeStamp:ft(),target:t}},On=function(e){var t=me,n=e.eventPhase;return 1===n&&(t=ve),t},Mn=Jt({ready:"DOMContentLoaded",deviceorientation:"deviceorientation mozOrientation",fullscreenalter:"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",hover:"mouseenter mouseleave",forcewillbegin:"mouseforcewillbegin webkitmouseforcewillbegin",forcechange:"mouseforcechange webkitmouseforcechange",forcedown:"mouseforcedown webkitmouseforcedown",forceup:"mouseforceup webkitmouseforceup",force:"mouseforcewillbegin webkitmouseforcewillbegin mouseforcechange webkitmouseforcechange mouseforcedown webkitmouseforcedown mouseforceup webkitmouseforceup"},Ge),In=Un(Mn,function(e,t,n){return It(t,function(t){e[t]=n}),e},{}),jn=function(e,t,n){var r=n||[];return function(n){var i=n,o=-1!==_e(r,i);o||r.push(i),e[i]&&!o?It(e[i],jn(e,t,r)):t(i,r[0],r.slice(0)),o||r.pop()}},Ln=Dn(function(e,t,n,r,i,o){return ze(r)?Bn(e,t,o,n,r,i):e}),Pn=Dn(function(e,t,n,r,i,o){var u;return ze(r)&&Bn(e,t,o,n,u=Ft(function(){return Ai(e,t,o,n,u,i),r.apply(this,arguments)}),i)}),Vn=Dn(function(e,t,n,r,i,o){return ze(r)?Ai(e,t,o,n,r,i):e}),Bn=function(e,t,n,r,i,o){var u,a=e.is(x);return It(Ge(t),jn(e.owner.events.expanders,function(t,a,s){u=u||e.directive(Zr),Ot[t]||e.mark(C),u.attach(t,{capturing:!!o,origin:e,handler:i,group:n,selector:r,passedName:a,domName:t,domTarget:e,nameStack:s})})),!a&&e.is(C)&&(jr(e,ve),e.remark(hi,rr(e.element(),e.owner))),e},Hn=function(e){return this.insertAt(e,ye)},qn=function(e){return this.insertAt(e,0)},Fn=function(e){return function(t,n){return Ye[e](this.element(),t,n)}},Wn=function(e,t){var n,r,i,u=o;return t.isIframe?(Xn(t),n=t.window(),n.is(k)&&(i=n.element(),r=i[W],u=r.body?r.body[L].outerHTML:o)):t.isElement&&(i=t.element(),u=i[e]),u},Gn=function(e,t,n){var r,i,u,a,s,c;t.isIframe?(a=t.window(),Xn(t),a.is(k)&&(c=a.element(),u=c[W],u.open(),u.write(n),u.close(),s=ve)):t.isElement&&(c=t.element(),i=c[e],c[e]=n||o,r=t.owner,It(r.$(J,c),r.returnsManager,r),i!==c[e]&&(s=ve)),s&&t.bubble("content:changed",n)},$n=function(e){return function(t){var r=this,i=r;return t===n?i=Wn(e,r):Gn(e,r,t),i}},Xn=function(e){var t,n,r;e.isIframe=e.tagName===pi,e.isIframe&&(r=e.element(),t=r.contentWindow,e.remark("windowReady",!!t),t&&(n=e.owner.returnsManager(t),n.iframe=e,Pr(n),e.cachedContent&&n.is(k)&&(e.html(e.cachedContent),e.cachedContent=ye)))},Yn=c.Events[y][g][ae],Kn=function(e,t,n,r){var i=!!r;return Yn.call(e,t,Cn(n,e.element(),t),{capturing:i})},Zn={id:me,src:me,checked:me,disabled:me,classes:X},er={play:"playing",pause:"paused"},tr=Ge("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu"),nr=tr.concat(t.keys(er),t.keys(Zn)),rr=function(e,t){var n,r,i,o=t.returnsManager(e),u=o.element();if(n=o.is(hi))return n;if(o.isWindow)return ve;for(;!r&&u[L];){if(i=u[L],Re(i))return me;if(Ne(i))return ve;if(i[ne])return rr(i,t);u=i}return me},ir=function(e,n){return function(r,i){var o=[];It(r,function(e){var t=i.returnsManager(e),r=t.is(hi);t.remark(hi,n),n!==r&&t.isElement&&t.is(C)&&o.push(t)}),t.eachCall(o,ae,e)}},or=ir("detach",me),ar=ir("attach",ve),sr=function(e,t,n,r){var i,o,u,a=n.element();return!n.isElement||a[he][e]===t&&r?me:(u=Ye.read(a,he),t=""!==t?zt(e,t):t,r?Ye.write(a,he,(i=Un(u.split(";"),function(n,r,i,u){var a=r.trim(),s=a.split(T),c=s[0].trim(),f=s[1].trim();return c===e&&(o=ve,f=t+" !important"),n.push([c,f].join(": ")),i!==u[P]-1||o||n.push([e,t+" !important"].join(": ")),n},[]).join("; "))?i+";":i):It(Gt[fr(e)],function(n){a[he][n+dr(e)]=t}),Ye.read(a,he)!==u)},hr={set:function(e,t,n,r){e.refill(t===ve?[]:t),t===me&&e.mark(A)},add:function(e,t){It(t,e.add,e)},remove:function(e,t){It(t,e.remove,e)},toggle:function(e,t,n){It(t,function(t){e.toggle(t,n)})},change:function(e,t,n){this.remove(e,t),this.add(e,Ge(n))}},pr=function(e){return function(t,n){var r=e(t,n);return t.is(U)&&(t.unmark(U),t[ae](q)),r}},vr=function(e,t,n,r,i,o,a){var s=e===Q?X:e,c=i||dr,f=r.preventUnCamel?s:c(s),l=f===X||f===se,d=(l?(r=Vt)&&(f=X)&&X:a)||f;return function(e,i){var a,s=e.element(),c=r.read(s,f),l=e,h=Bt(e,f,c);return"get"===o?(i||(l=c),l):(Rn(t,n,function(e,t){var n=o||(t===ve?"add":t===me?R:"toggle");hr[n](h,Ge(e),t,c)}),h.changeCounter&&(h.is(A)?(h.unmark(A),r.remove(s,f)):(a=h.generate(u),r.write(s,f,a))),void(a!==c&&e.is(C)&&(e.mark(U),e[ae](q+T+d,{previous:c,current:mr(a)}))))}},mr=function(e){var t,n=e;return n===o?n=ve:n==ye?n=me:(t=+n,n=t===t?t:n),n},gr=function(e,t,n){return function(r){return function(i,o,u,a,s,c){return r(e(i,o,u,a||n,s,t,c),this)}}},yr=function(e,t,n,r){var i=Ge(t);return function(t){var n=t.element(),o=wi(t,e),a=r.read(n,e);return o.ensure(a,u),Ct(i,function(e){var t=o.get(l,e);return t?!t.isValid():ve})}},wr=gr(vr,"set",Ye),br=gr(vr,"add",Ye),xr=gr(vr,R,Ye),Ar=gr(vr,"toggle",Ye),kr=gr(vr,"change",Ye),Tr=gr(vr,"get",Ye),Sr=gr(yr,"has",Ye),Dr=function(e,t,r){return function(i){return function(i,o,u){var a,s=this,c=Qe(i),f=c?u:o,l=c?o:ye,d=t||f;return c&&l===n?(s=s.index(0),d.read(s.element(),r(i))):(a={},s.each(pr(Nn(i,l,function(t,n,i,o){var u=a[t]=a[t]||e(t,n,ye,d,r,it(n)?ye:"set");u(i,o)}))),s)}}},Cr=Dr(vr,Ye,dr),Or=Dr(vr,Ye,bn),Mr=Dr(vr,Vt,dr),Ir=function(e,t){return t.each(e),t},_r=function(e,t){return e(t.index(),0)},Nr=function(e,t){return!t.find(e)},Rr=function(e,n,r,i){var o=n||e;return t.foldl(Ge("add remove toggle change has set"),function(t,n){var u=n+"Value";return t[n+lr(e)]=function(t,n){return this[u](o,t,n,r,i,e)},t},{})},jr=function(e,t){var n,r=e.isElement&&Ye.read(e.element(),z);e.remark(x,t||!!r),e.is(x)&&!r&&(r=ve),n=e.isElement&&$e(e.element(),z,r),r&&(e.registeredAs=r)},Lr=function(e){var t;e.isElement=me,e.isIframe=me,e.tagName=me,e.isWindow||(t=e.element(),(e.isElement=Ie(t))&&(e.tagName=un(t),Xn(e),jr(e)))},Pr=function(e){var t,n=e.element();e.isWindow=vi(n),e.isWindow&&e.owner&&(e.remark(k,t=!!Qn(function(){return n[W]})),e.isTop=!(!window||n!==window.top),e.setAddress(),t&&(e.isTop||e.remark(k,e.sameOrigin())))},Vr=function(e,t){var n=e.element();return Pr(e),Lr(e),e.isDocument=me,e.isFragment=me,e.unmark(hi),e.isWindow?void e.mark(hi):(e.isDocument=Ne(n),e.isFragment=Re(n),e.isDocument||e.isFragment?void e.mark(hi):void e.remark(hi,rr(e,t)))},Br=function(e,t){return lr(E)+a+t.documentId+a+e},Hr=function(e,t){return'<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="user-scalable=no,width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">'+e+"</head><body>"+t+"</body></html>"},qr=function(e,t){return wn((t||doc_).querySelectorAll(e))},Ur=c.DOMA_SETUP=function(t){var n,r,i,o,u,a=Ii(t,ve),s=c.Registry(),f=(dn(Le(Mn)),0),l={},d=function(){return u=ye,{x:0,y:0,z:0,motionX:0,motionY:0,motionZ:0,interval:1,rotationRate:0,alpha:0,beta:0,gamma:0,absolute:0}};return a.documentId?a.$:(n=$t(Dt),i=function(e){a.DOMContentLoadedEvent=e,a.mark("ready")},r=function(e,t){var n=t||a;return Bi(e,n,me,a===n,a)},a.documentId=cr("doc"),o=pt(Jt({$:r,makeTree:sn,makeBranch:cn,createElements:pn,createDocumentFragment:ln,registeredElementName:Br,fragment:function(){return Ii(vn(ye,a),a)}},function(e){return function(t){return e(t,a)}}),{events:{custom:{},expanders:{},lists:Jt({base:ut,svg:at,keyboard:ct,gamepad:lt,composition:dt,mouse:ht,touch:vt,device:mt,focus:gt,time:yt,animation:wt,audioProcessing:xt,ui:At,progress:Et,all:kt},function(e,t){return dn(Le(e))})},supports:{},returnsManager:function(e){return e===a||e===a[M]?a:Ii(e,a)},createElement:function(e,t,n){return an(e,t,n,a)},expandEvent:function(e,t){var n=a.events.expanders;return It(Ge(t),function(t){It(Ge(e),function(e){n[e]=n[e]||[],-1===_e(n[e],t)&&n[e].push(t)})}),a},customEvent:function(e,t){return It(Ge(e),function(e){a.events.custom[e]=t}),a},iframeContent:Hr,orderEventsByHeirarchy:ve,data:c.Associator(),documentId:a.documentId,document:a,devicePixelRatio:de,constructor:Bi[y],registeredElements:n,templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},stashMotionEvent:function(e){u=e},motion:function(){var e,t,n,r;return u?f>=u.timestamp?l:(f=ft(),e=u.originalEvent,t=e.acceleration||(n=e.accelerationIncludingGravity)&&{x:n.x-9.81,y:n.y-9.81,z:n.z-9.81},t&&tt(t.x)&&(l.x=t.x,l.y=t.y,l.z=t.z,l.interval=e.interval,l.rotationRate=e.rotationRate,r=ve),e.alpha!=ye&&(l.alpha=e.alpha,l.beta=e.beta,l.gamma=e.gamma,l.absolute=e.absolute,r=ve),r?l:d()):d()},plugin:function(e){return Ui.push(e),It(Hi,function(t){e(t)}),this},compile:function(e,t){return Oe(e,t,a)},collectTemplates:function(){return r("script[id]").each(function(e){Oe(e.element().id,e.html(),a)}).remove()},unregisteredElement:function(e){s.keep(e.registeredElementName(),e.id,e)},registerElement:function(t,r){var i,o,u=r||{},c=u.events,f=u.prototype,l=u.onCreate||Me,d=u.onDestroy,h=a.registeredElementName(t),p=function(e,t,n){var r=(f&&pt(e,f),c&&e.on(c),n||{});l(e,r);return d&&e.on("destroy",d),r.validCustomElement=ve,r},v=function(e,t,n){_t(f,function(e,n){t[n]===e&&delete t[n]}),d&&(t.dispatchEvent("destroy"),t.off("destroy",d))};Dt[t]?Jn({message:"element names must not be used natively by browsers"}):(o=(u["extends"]&&!Dt[u["extends"]]?e.extendDirective(a.registeredElementName(u["extends"]),h,p,v):e.defineDirective(h,p,v))||Jn({message:"element names can only be registered once per document"}),n[t]=u["extends"]?n[u["extends"]]:le),h=a.registeredElementName(t),(i=s.group(h))&&_t(i,function(e,t){delete e[h],e.History.drop("category",x),e.registerAs(),s.drop(h,t)})}}),pt(a,o),pt(r,o),Wr(a.supports,a),_i(i,a),r)},Fr=function(e,t,n,r){It(Ge(t),function(t){e.addEventListener?(e.addEventListener(t,n),e.removeEventListener(t,n)):n(r)})},Wr=function(e,t){var n=t.window(),r=n.element();e.deviceMotion=!!r.DeviceMotionEvent,e.deviceOrientation=!!r.DeviceOrientationEvent,e.motion=e.deviceMotion||e.deviceOrientation,Fr(r,"deviceorientation devicemotion",function(t){t.alpha===ye&&(e.motion=e.deviceMotion=e.deviceOrientation=me)},{alpha:ye})},Gr=function(e,r){var i,o,u=this;return u.length()?Qe(e)&&r===n?(i=dr(e),(u=u.index(0))&&(o=u.getStyle())&&((ur=t.find(Gt[fr(e)],function(e){return o[e+i]!==n}))?o[ur+i]:o[ur+i])):(u.each(pr(Nn(e,r,sr))),u):u},$r=Tr(_r),zr=wr(Ir),Jr=Rr(Q,X,Vt),Qr=function(e){var t=this.element();return Fi(qr(e,t),t)},Yr=function(e){return e.isValidDomManager||Ie(e)||Re(e)},Kr=function(){Xn(this)},ti=function(e,t,n,r,i,o){var u,a,s=r,c=Mi(t),f=_e(c,n);if(o)for(s=s||1,u=n;u&&!a;)u=c[f=f+=s],a=fn(u,i);else u=n,u=c[f],u=c[f+s];return u&&e.owner.returnsManager(u)},ni=function(e,t,n){return function(e){var r,i,o=n,u=e||n,a=this,s=a.element(),c=s[t];if(!(r=Qe(u))&&t&&!c)return a.owner.returnsManager(c);if((i=s[L])||c)return ti(a,i,s,o,u,r)}},ri=function(e,t){var n=e.element();return(e.isElement&&e.is(t?C:x)?[n]:[]).concat(qr(J,n))},oi="isTrusted",ui="fullscreen",ai={props:Ge("altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which"),fixedHooks:{},keyHooks:{props:Ge("char charCode key keyCode"),filter:function(e,t){var n;return e.which==ye&&(n=t.charCode,e.which=n!=ye?n:t.keyCode),e}},forceHooks:{props:[],filter:function(e,t){return e.value=(t.force||t.webkitForce)/3||0,e}},motionHooks:{props:[],reaction:function(e){e.origin.owner.stashMotionEvent(e)}},mouseHooks:{props:Ge("button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement"),filter:function(e,t){var r,i,o=t.button;return e.pageX==ye&&t.clientX!=ye&&(evntDoc=e.target.ownerDocument||r,r=evntDoc.documentElement,i=evntDoc[pe],e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.movementX=t.movementX||0,e.movementY=t.movementY||0,e.layerX=t.layerX||0,e.layerY=t.layerY||0,e.x=t.x||0,e.y=t.y||0,e.which||o===n||(e.which=1&o?1:2&o?3:4&o?2:0),e}},make:function(e,n,r){var i,o,u,a,s=n.type,c=ai.fixedHooks[s];r.origin;if(c||(ai.fixedHooks[s]=c=Ue.test(s)?this.mouseHooks:qe.test(s)?this.keyHooks:We.test(s)?this.forceHooks:Fe.test(s)?this.motionHooks:{}),a=c.props?this.props.concat(c.props):this.props,u=a[P],It(a,function(t){var r=n[t];r!=ye&&(e[t]=r)}),e.originalType=s,o=e.target||(e.view?e.view.event.currentTarget:event&&event.currentTarget)||e.delegateTarget.element(),o||(o=e.target=i),3===o[v]&&(e.target=o[L]),(c.filter||Me)(e,n),s=In[n.type]||n.type,si.call(e,r.origin,dn(n.data),s,ye,e.timeStamp),e.type===ui+O){if(i=e.target,vi(i))i=i[W];else for(;i&&!Ne(i)&&i[L];)i=i[L];e.fullscreenDocument=i,Ne(i)&&e.remark(ui,i.fullScreen||i.webkitFullscreenElement||i.mozFullScreenElement||i.fullscreenElement?ve:me)}e[oi]=t.has(n,oi)?n[oi]:!Ke,(c.reaction||Me)(e,n)}},si=c.ObjectEvent[y],ci=c.DomEvent=c.ObjectEvent.extend("DomEvent",{AT_TARGET:1,constructor:function(e,t){var r=this;return ci.isInstance(e)?e:(r.originalEvent=e,Be(e.target)&&Be(e.currentTarget)?r.delegateTarget=t.origin.owner.returnsManager(t.target):r.delegateTarget=t.origin,ai.make(r,e,t),r.capturing=t.capturing===n?On(r):t.capturing,r)},motion:function(){var e=this,t=e.origin.owner,n=t.motion();return n},preventDefault:function(){var e=this.originalEvent;this[fi]=ve,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this[li]=ve,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this[di]=ve,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}}),mi=function(e,t,n,r){var i=e.origin.element();i.removeEventListener?i.removeEventListener(t,n[r],r):i.detachEvent(t,n[r]),delete n[r]},gi=c.EventsDirective.extend("DomEventsDirective",{remove:function(e,t){var n=this,r=n.elementHandlers,i=e.name,o=r[i],u=o.capturing;e.remove(t),u?(--o[$],o[$]||mi(t,i,o,u)):(t.selector&&o[G]--,e[P]()===o[$]&&mi(t,i,o,u))},add:function(e,t){for(var n,r,i,o,u,a=this,s=t.element,c=0,f=a.elementHandlers=a.elementHandlers||{},l=e.name,d=f[l],h=t.capturing,p=e.unwrap(),v=t.origin.owner.events.custom;c<p[P]&&!n;c++)i=p[c],n=t.capturing===t.capturing&&t.handler===i.handler&&i.group===t.group&&t.selector===i.selector&&t.passedName===i.passedName;if(!n&&(u=d,d||(d=f[l]={delegateCount:0,captureCount:0,events:a,currentEvent:ye,capturing:h}),t.mainHandler=d,d[h]||(o=d[h]=function(e){return Kn(t.domTarget,e.type,e,h)}),t.capturing?(e.insertAt(t,d[$]),++d[$]):t.selector?(r=d[G],++d[G],r?e.insertAt(t,d[$]+r):e.insertAt(t,d[$])):e.unwrap().push(t),It(t.nameStack,function(e){t.fn=(v[e]||Ve)(t.fn,e,t)||t.fn}),o))if(s=t.origin.element(),s.addEventListener)s.addEventListener(t.domName,o,h);else{if(h)return;s.attachEvent(t.domName,o)}},create:function(e,t,n,r){return ci(t,{target:e.target,origin:e,capturing:r.capturing})},queue:function(e,t,n){var r;return(r=e.add(t))&&(n.currentTarget=t.temporaryTarget,t.mainHandler.currentEvent=n),r},unQueue:function(e,t,n){return n.currentTarget=t.currentTarget=ye,t.mainHandler.currentEvent=ye,e.pop(),this},cancelled:function(e,t,n){var r,i,o,u=this;if(!e[P]())return u;if(o=e.first(),r=o.mainHandler,i=r[G],!i||n>i)return u;for(;i>=n;)o=e[n],o.temporaryTarget=ye,++n;return u},nextBubble:function(e,t){var n,r=e.element();return!e.isElement||r[L]?me:e.parent(function(t){return t[ne]&&(n=e.owner.returnsManager(t),n.is(C))?[n,ve]:[t[L],me]})},subset:function(e,t){var n,r,i,o,u,a,s,c,f,l,d,h,p=0,v=0,m=[],g=t.origin;if(!e[P])return[];if(f=e[0],l=f.mainHandler,h=l[$],d=l[G],t.capturing)return e.slice(0,h);if(g=t.origin,a=g.element(),i=t.target,!d||t.target===a)return e.slice(h);for(o=h+d,p=h,s=e.slice(o);o>p;)for(f=e[p],++p,c=f.selector,u=-1,n=i;!r&&n&&Ie(n)&&n!==a;){if(++u,fn(n,c))if(r=n,f.temporaryTarget=r,f.parentNodeNumber=u,g.owner.orderEventsByHeirarchy)if(v=m[P])for(;f&&m[--v];)m[v].parentNodeNumber<=f.parentNodeNumber&&(m.splice(v+1,0,f),f=ye);else m.push(f);else m.push(f);n=n[L]}return m.concat(s)}}),yi=function(e,t){for(var n=me,r=e;!r.isTop&&!n;)r=t.returnsManager(r.element().parent),r.iframe&&r.is(k)&&(n=!r.iframe.visible());return!n},wi=function(e,t){var n=e.directive(s),r=n[t]=n[t]||Nt();return r},bi=function(e,t,n){return function(r){var i,o=this[ie](r);return o.isElement?i=Yt(o.element())[e]:o.isDocument&&o.element()[pe]?i=o.element()[pe][t]:o.isWindow&&(i=o.element()[n]),i||0}},xi=(e.extendDirective("Registry","History"),c.DomManager=c.Events.extend(p,pt(Jr,{"directive:creation:EventManager":gi,isValidDomManager:ve,$:Qr,registeredElementName:function(){return this.owner.registeredElementName(this.registeredAs)},hasValue:Sr(Nr),addValue:br(Ir),removeValue:xr(Ir),toggleValue:Ar(Ir),changeValue:kr(Ir),on:Ln,once:Pn,off:Vn,append:Hn,prepend:qn,getAttribute:$r,setAttribute:zr,removeAttribute:Fn(R),attr:Cr(Ir),data:Or(Ir),prop:Mr(Ir),html:$n(V),text:$n(B),css:Gr,next:ni("next","nextElementSibling",1),prev:ni("prev","previousElementSibling",-1),skip:ni("skip",ye,0),height:bi(re,"scrollHeight",oe),width:bi(te,"scrollWidth",ue),siblings:function(e){var t=this,n=Ti(e);return t.parent().children(function(e,r,i){return e!==t&&n(e,r,i)})},constructor:function(e,t,n){var r=n,i=this;return i[M]=e,Vr(i,r),i.isElement||i.isFragment?(t[p]=i,r=ge(e.ownerDocument,ve),i.isElement&&(i.id=e[ne])):i.isDocument?r=i:t[p]=i,i.owner=r||me,i.isIframe&&i.on(q+":src detach attach",Kr),i.isWindow&&Pr(i),i.isElement&&i.registerAs(),i},clone:function(){var e=this;return e.isElement?cn(e.element()[H],e.owner):{}},element:function(){return this[M]},elements:function(){return[this[M]]},length:function(){return 1},wrap:function(e){return this.owner.$(e||this)},unwrap:function(){return[this]},parent:function(){var e=function(e,t,n){for(var r,i,o=e,u=o.element(),a=n;u&&!i;)r=t(u,n,a),u=r[0],i=r[1],a=r[2];return i?o.owner.returnsManager(u):void 0},t=function(e,t,n){return n-=1,(0>n||!rt(n)||Ze(n))&&(n=0),[e[L],!n,n]},n=function(e,t,n){var r=e[L];return[r,fn(r,t)]},r={document:function(e,t,n){var r=e[L];return Ne(r)?[r,ve]:Ie(r)?[r[L],me]:Re(r)?[ye,me]:void 0},window:function(e,t,n,r){var i,o=e[fe];return o?[o,ve]:(i=e[L])?[i,me]:[me,me]},iframe:function(e,t,n){var r,i=e,o=vi(e);return o?i===i.top?[ye,me]:(r=Qn(function(){return i.frameElement}),[r,!!r]):[e[fe]]||e[L]}};return function(i){var o,u=this,a=me;return tt(i)?o=t:Qe(i)?o=r[i]||n:a=i?ve:a,a?e(u,i):(o||(o=t,i=1),e(u,o,i))}}(),contains:function(e){var t,n,r=e,i=this;return vi(r)?me:Qe(r)?!!qr(r,i.element())[P]:r.isValidDOMA?!!r.find(i.contains,i):(n=i.owner.returnsManager(r),n.isDocument?n.window()===i:(t=i.element(),!!n.parent(function(e){var n=e[L];return[n,n===t]})))},insertAt:function(e,t){var n=this,r=n.owner,i=Yr(e)?r.returnsManager(e):r.$(e).fragment(),o=i.element(),u=t==ye?ye:n.children(),a=u&&u.index(t)||ye,s=a&&a.element()||ye,c=n&&n.element(),f=i.children(),l=ri(i,ve);or(l,r),c&&c.insertBefore(o,s),rr(c,r)&&ar(l,r);return f},window:function(){var e=this;return e.isWindow?e:e.isDocument?e.returnsManager(e.element().defaultView):e.isIframe?e.owner.returnsManager(e.element().contentWindow):e.owner.window()},setAddress:function(e){var t=this;return e=t.address=e||t.address||_n()},emit:function(e,n,r){var i,o=this.window(),u=o.element();return o.is(k)&&(i=dn(e),r)?(r({srcElement:u,timeStamp:t.now(),data:function(){return i}}),this):(Qn(function(){n?u.postMessage(e,n):zn.error("missing referrer: "+o.address)},zn.error),this)},sameOrigin:function(){var e,t=this,n=t.element(),r=t.owner.window(),i=r.element();return r===t?ve:t.is(k)?(e=Er(n.location.href),!e&&t.iframe&&(e=Er(t.iframe.src())),!e||e===Er(i.location.href)):me},registerAs:function(e){var t,n,r,i=this,o=e||i.registeredAs;return!i.is(x)||(t=i.directive("History"))&&o===t.get("category",x)?i:(r=i.owner.registeredElementName(t.get("category",x)),i.directiveDestruction(r),t.keep("category",x,o),n=i.owner.registeredElementName(o),i.directive(n),i[n].validCustomElement||i.owner.unregisteredElement(i),i)},children:function(e,t){var r,i,o=this,u=Mi(o.element());return e===n?t?(u=mn(u,o.owner.returnsManager,o.owner))&&t.isFragment?t.append(u):t.push.apply(t,u)?t:t:o.wrap(u):(r=Ti(e),i=Un(u,function(e,t,n,i){return r(t,n,i)&&e.push(o.owner.returnsManager(t)),e},t||[]),t?i:o.wrap(i))},visible:function(){var e,t,n,r,i,o,u,a=this;return a.is(hi)?(n=a.getStyle(),0===+n.opacity||n.display===S||"0px"===n.height||"0px"===n.width||n.visibility===D?me:(t=a.element(),e=t.getBoundingClientRect(),e.height&&e.width?(i=(a.element().ownerDocument||{}).defaultView)?(o=i[oe],u=i[ue],o<e.top||u<e.left||e.right<0||e.bottom<0?me:(r=a.owner.returnsManager(i),r.isTop?ve:yi(r,a.owner))):ve:me)):me},hide:function(){return this.applyStyle("display","none")},show:function(){return this.applyStyle("display","block")},applyStyle:function(e,t,n){return sr(e,t,this,n),this},getStyle:function(e){var t={},n=this,r=n.element();return r&&n.isElement&&(t=Pe(r,n.owner.element())),t},remove:function(e,t){var n,r,i=this,o=i.is(A)||me;return!o&&(n=i.element())&&(r=n[L])?(i.mark(A),i.isIframe&&t&&ze(t)&&setTimeout(Mt(t,ye,i)),e?e.appendChild(n):r.removeChild(n),or([n],i.owner),i.remark(A,o),i):i},frame:function(e,t){var n=this,r=e||"";return(t||1===r.toLowerCase().split("<!doctype ")[P])&&(r=n.owner.iframeContent(r,t)),n.isIframe?(n.is(hi)?n.html(r):n.cachedContent=r,n):r},destroy:function(e){var t,n=this,r=n.registeredAs,i=n.element();return n.is(w)?n:(n.mark(w),n.isIframe&&n.owner.data.remove(i.contentWindow),n.remove(ye,e),r&&(t=n.owner.registeredElementName(r),n.directiveDestruction(t)),n.directiveDestruction(Zr),n.owner.data.remove(i),n[ei](),n)},index:function(){return this},each:function(e,t){var n=this,r=[n];t?e.call(t,n,0,r):e(n,0,r);return r},find:function(e){var t=this;return e(t,0,[t])?t:n},client:function(){return Yt(this.element())},box:function(e){return Qt(this.element(),e)},flow:function(e){return qt(this.element(),e)},dispatchEvent:et(function(e,t,n){return Kn(this,e,t,n)}),toJSON:function(){var e,t,n,r,i,o=this,u=o.owner,a=o.element();return o.isWindow||o.isDocument?{}:(r=o.children(),i={tag:o.isFragment?le:un(a)},(n=r[P]())&&(t=u.element().createDocumentFragment(),Rt(r.unwrap(),function(n){var r=n.element();t.insertBefore(r,e||ye),e=r}),i.children=r[m]()),a[B]&&(i[B]=a[B]),n&&a.appendChild(t),It(a[s],function(e){var t=i.attributes=i.attributes||{};t[fr(e[I])]=e.nodeValue}),i)}},Jt(Zn,function(e,t){return e||(e=t),function(t){var r=this;return t!==n?r.attr(e,t):r.element()[e]}}),Jt(er,ot),Jt(tr,function(e){return ot(e)}),Jt(Ge("add addBack elements push fragment"),function(e){return function(t,n,r){return this.wrap()[e](t,n,r)}})))),Ai=function(e,t,n,r,i,o){var u=e.directive(Zr),a=function(e,t){return e.obliteration(function(e){t&&t!==e.passedName||i&&e.handler!==i||n&&e.group!==n||r&&e.selector!==r||u.detach(e)})};return t?It(Ge(t),jn(e.owner.events.expanders,function(e,t){a(u[ii][e],t)})):_t(u[ii],Kt(a))},Ei=t.eq,ki=t.matches,Ti=function(e){return ze(e)?e:Qe(e)?nn[e]||function(t){return fn(t,e)}:tt(e)?function(t,n){return n===e}:it(e)?ki(e):function(){return ve}},Si=function(e){return function(t,n,r){return e(t.element(),n,r)}},Di=function(e,t){return Un(e,function(e,n,r,i){return t(n,r,i)&&e.push(n),e},[])},Ci=function(e,t){var n=Ti(t);return Di(e,Si(n))},Oi=function(e){return vi(e)||Ie(e)||Ne(e)||Re(e)},Mi=function(e){return wn(e.children||e.childNodes)},Ii=function(e,t){return e&&!vi(e)&&e.isValidDomManager?e:ge(e,t)},_i=(t.exports({covers:An,center:En,closer:Tn,distance:kn,escape:Se,unescape:De,box:Qt,isElement:Ie,isWindow:vi,isDocument:Ne,isFragment:Re,unitToNumber:on,numberToUnit:rn}),function(e,t){var n=Mt(e,t),r=t.window(),i=function(e){t.off("DOMContentLoaded",i),r.off("load",i),t.$(J).each(t.returnsManager),n(t.$,e)};return t.is("ready")?n(t.$,t.DOMContentLoadedEvent):(t.on("DOMContentLoaded",i),r.on("load",i)),t.mark("setup"),t}),Ni=function(e){return function(t,n,r,i,o,u){return this.each(function(a){a[e](t,n,r,i,o,u)})}},Ri=Ge("show hide style remove on off once addEventListener removeEventListener dispatchEvent").concat(nr),ji=Ge("tag element client box flow"),Li=function(e){var t="tag"!==e;return function(n,r){var i=this.index(n);return i&&i[e](t?this.context:r)}},Pi=Ge("isWindow isElement isDocument isFragment"),Vi=function(e){return function(t){var n=this.index(t);return n&&n[e]}},Bi=c.DOMA=c.Collection.extend("DOMA",pt(Rr(Q,X,Vt,ve),{isValidDOMA:ve,destroy:function(e){var t=ze(e)?e:ye;return this.each(function(e){e.destroy(t)})},constructor:function(e,t,n,r,i){var o=e,u=this,a=u.context=r?t.index(0):i,s=u.owner=i,c=a.element();if(e&&!vi(e)&&e.isValidDOMA)return e;if(ze(e)){if(Ne(c))return _i(e,s).wrap()}else n||(Qe(e)?o="<"===e[0]?sn(e,s):mn(qr(e,c),s.returnsManager,s):(o=e,xi.isInstance(o)?o=[o]:(d.isInstance(o)&&(o=o.unwrap()),o=Oi(o)?[s.returnsManager(o)]:o&&mn(o,s.returnsManager,s)))),u.reset(o);return u},setValue:wr(Ir),hasValue:Sr(Nr),addValue:br(Ir),removeValue:xr(Ir),toggleValue:Ar(Ir),changeValue:kr(Ir),add:xn(function(e,t){var n=e.owner.$(t);return en(e.unwrap(),n.unwrap())}),addBack:xn(function(e,t){var n=e._previous;return n?(t&&(n=n.filter(t)),e.unwrap().concat(n.unwrap())):e.unwrap().concat([])}),wrap:function(){return this},push:function(){var e=this.context.owner;return this.items.push.apply(this.items,Un(arguments,function(t,n){return n?(vi(n)?t.push(n):t=t.concat(!vi(n)&&ze(n.unwrap)?n.unwrap():e.returnsManager(n)),t):t},[],e)),this},elements:function(){return this.mapCall("element")},fragment:function(e){return this.context.returnsManager(vn(e||this.unwrap(),this.context))},filter:xn(function(e,t){return Ci(e.unwrap(),t)}),empty:xn(function(e,t){var n=Ti(t);return Di(e.unwrap(),Si(function(e,t,r,i){return!n(t,r,i)&&t.remove()}))}),$:xn(function(e,t){var n=[],r=function(t){n.push(e.owner.returnsManager(t))};return It(e.unwrap(),function(e){It(qr(t,e.element()),r)})&&n}),children:xn(function(e,t){return Un(e.unwrap(),function(e,n){return n.children(t,e)},[])}),css:Gr,allElements:function(){return!(!this[P]()||Ct(this.unwrap(),function(e){return!e.isElement}))},height:bi(re,"scrollHeight",oe),width:bi(te,"scrollWidth",ue),attr:Cr(Ir),data:Or(Ir),prop:Mr(Ir),eq:xn(function(e,t){return Ei(e.unwrap(),t)}),end:function(){for(var e=this;e._previous;)e=e._previous;return e},getAttribute:$r,setAttribute:zr,append:function(e,t){return this.insertAt(e,ye,t)},prepend:function(e,t){return this.insertAt(e,0,t)},appendTo:function(e){return Fi(e).append(this),this},next:yn("next",1),prev:yn("prev",-1),skip:yn("skip",0),siblings:xn(function(e,t){return hn(e,function(e){return e.siblings(t).unwrap()})}),insertAt:function(e,t,n){var r=this,i=r.owner,o=Yr(e)?this.context.returnsManager(e):i.$(e).fragment();return this.each(function(e){var r=o;n&&(r=r.clone()),e.insertAt(r,t)})},replaceWith:xn(function(e,t,n){var r,i,o=e.owner;return(r=Qe(element))||(i=Yr(t)?o.returnsManager(t):o.$(t).fragment()),hn(e,function(n,o){var u=t;if(!n.isElement)return[];if(r)u=e.owner.$(t);else if($t)u=i.clone();else if(o)return[];return parent=n.parent(),parent.insertAt(u,parent.children().indexOf(n)),n.remove(),u.unwrap();
})}),contains:function(e){return!!this.find(function(t){return t.contains(e)})},clone:xn(function(e){return e.foldl(function(e,t){return t.isElement&&e.push(t.clone()),e})}),parent:xn(function(e,t){var n={};return e.foldl(function(e,r){var i;return(i=r.parent(t))&&!n[i[M][ne]]&&(n[i[M][ne]]=i,e.push(i)),e},[])}),has:function(e){var t=this,n=d(e),r=n[P]();return!!r&&n.find(function(e){return-1===t.indexOf(e)})},html:gn(V),text:gn(B),map:function(e,t){return d(mn(this.unwrap(),e,t))},toJSON:function(){return this.results(m).unwrap()},toString:function(){return Le(this)}},Jt(Ri,Ni),Jt(ji,Li),Jt(Pi,Vi))),Hi=[],qi=function(e){var t=Ur(e[W]);return Hi.push(t),e.DOMA=e.DOMA||t,e.$=Be(e,"$")?e.$:t,It(Ui,function(e){e(t)}),t},Ui=[],Fi=qi(r);e.undefine(qi),Fi.collectTemplates(),e.defineDirective(s,function(){return{}})}),e.scope(function(e){var t,n,i,o=e._,u=o.factories,a=0,s=0,c=0,f=o.pI,l=o.now,d=o.gapSplit,h=d("ms moz webkit o"),p="running",v="halted",m="stopped",g="destroyed",w="Timeout",b="clear"+w,x="AnimationFrame",A="request"+x,E="cancel"+x,k=[],T=[],S=o.eachCall,D=o.time,C=(o.remove,me),O=ve,M=function(e){var o=Math.max(0,s-c);O?t=r[A](e):n=r.setTimeout(e,o),B.playWhileBlurred&&(i=r.setTimeout(function(){O=me,e()},o+50))},I=function(){r[E](t),r[b](n),r[b](i),c=o.now(),S(T,"run",c),N()},_=function(){C=ve,M(I)},N=function(){Rt(T,function(e,t){(e.is(v)||e.is(m)||e.is(g)||!e.length())&&(e.stop(),T.splice(t,1))}),C=me,T[P]&&_()},R=function(e){k.push(e)},j=function(e){-1===_e(T,e)&&T.push(e),C||_()},L=(function(){for(;a<h[P]&&!r[A];++a)r[A]=r[h[a]+"RequestAnimationFrame"],r[E]=r[h[a]+lr(E)]||r[h[a]+"CancelRequestAnimationFrame"];r[A]||(r[A]=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-s)),i=r.setTimeout(function(){e(t+n)},n);return s=t+n,i}),r[E]||(r[E]=function(e){r[b](e)})}(),"Looper"),V=u.Collection,B=u[L]=V.extend(L,{constructor:function(e){var t=this;return t.mark(m),t.unmark(v),t.unmark(g),t.unmark(p),V[y].call(t),t.removable=u.List(),R(t),t},destroy:function(){return this.mark(g),this.halt()},run:function(e){var t=this;t.is(v)||t.is(m)||(t.find(function(n){return t.current=n,n.disabled?void t.queueRemoval(n):t.is(v)?ve:void Qn(function(){n.fn(e)},function(){t.queueRemoval(n)})}),t.current=ye,t.unmark(p),t.removable.each(Kt(Mt(t.remove,t))).reset())},queueRemoval:function(e){var t=this;e.disabled=ve,t.current?t.removable.push(e):t.unqueue(e)},dequeue:function(e){var t=this,n=e;return!arguments[P]&&t.current?(t.queueRemoval(t.current),ve):it(n)?t.queueRemoval(n):tt(n)?(n=t.findWhere({id:n}),t.current?t.queueRemoval(n):t.unqueue(n)):me},stop:function(){return this.mark(m),this},start:function(){var e=this;return e.is(m)&&(e.unmark(m),e.unmark(v)),e},halt:function(){return this.mark(v),this.stop()},queue:function(e){var t,n=cr(me),r=this;if(ze(e))return r[P]()||r.start(),j(r),t={fn:r.bind(e),id:n,disabled:me,bound:r},r.push(t),n},bind:function(e){return Mt(e,this)},once:function(e){return this.frames(1,e)},frames:function(e,t){var n,r=0,i=f(e)||1;return!t&&ze(i)&&(t=e,i=1),ze(t)?(n=this.bind(t),(1>i||!tt(i))&&(i=1),this.queue(function(e){var t=1;r++,r>=i&&(this.unqueue(),t=0),n(e,!t,r)})):void 0},tween:function(e,t){var n,r=l(),i=D(e);return i||(i=0),ze(t)?(n=this.bind(t),this.interval(0,function(e){var t=1,o=e-r;o>=i&&(t=0,this.unqueue()),n(e,Math.min(1,o/i),!t)})):void 0},time:function(e,t){var n;return ze(t)?(n=this.bind(t),this.interval(D(e),function(e){this.unqueue(),n(e)})):this},frameRate:function(e,t,n){var r,i=this,o=Math.min(n||.8,.8),u=30*o,a=1,s=l(),c=e||125;return ze(t)?(r=i.bind(t),i.queue(function(e){var t=1e3/(e-a);t>40&&(u=60*o),u>t&&(s=e),e-s>c&&(i.unqueue(),r(e)),a=e})):i},interval:function(e,t){var n,r=this,i=l();if(ze(t))return e||(e=0),n=r.bind(t),r.queue(function(t){t-e>=i&&(i=t,n(t))})}}),H=u.Scheduler=u.Directive.extend("Scheduler",{});B.playWhileBlurred=ve,e.defineDirective("Scheduler",H[y]),o.exports({AF:B()})}),e.scope(function(e){var t=e._,r=t.factories,i=function(e,t){return this[ae](e,t)},a=function(e,t,n){var r="delegateEvents"+e,i=_e(n,"@"),u=-1!==i;return{selector:u?s(n.slice(i),t):o,group:r,events:u?n.slice(0,i):n}},s=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},c=r.Directive.extend("Element",{constructor:function(e){return this.view=e,this},ensure:function(){var e,t=this,n=t.view,i=t[A]||Pn(n,"el");i&&(t[A]=i),qe(i,r.DOMA)||(e=Qe(i)?i:t.create(n.tagName()),t.set(e,me))},create:function(e){return $.createElement(e)},unset:function(){var e=this;delete e.view.el,delete e.el},set:function(e,t){var n=this;n.view.el=n.el=e},render:function(e){var t=this;return t.el.html(e||""),t},degenerateUIBindings:function(){var e=this;e.ui&&(e.ui=e.view.ui=e.uiBindings,delete e.uiBindings)},generateUIBindings:function(){var e=this,t=e.uiBindings||Pn(e.view,"ui");e.ui=e.ui||{};return e.uiBindings?e:(e.uiBindings=t,e)},delegateEvents:function(){var e=this,t=e.view,n=e.el,r=e.elementBindings||Pn(t,"elementEvents"),i=[];return e.elementBindings&&(e.elementBindings=r),n?(e.cachedElementBindings=mn(r,function(r,o){var u=a(t.cid,e.uiBindings,o),s=u.fn=Mt(Qe(r)?t[r]:r,t);i.push(u),n.on(u.events,u[A],s,u.capture,u.group)}),e.cachedElementBindings=i,e):e},undelegateEvents:function(){var e=this,t=(e.view,e.el),r=e.cachedElementBindings;return r&&t?(It(r,function(e){t.off(e.events.join(u),e[A],e.fn)}),e.cachedElementBindings=n,e):e},delegateTriggers:function(){var e=this,t=e.view,n=e.el,r=e.elementTriggers||Pn(t,"elementTriggers"),o=[];return e.elementTriggers||(e.elementTriggers=r),n?(_t(r,function(r,o){var u=a(t.cid,e.uiBindings,o),s=u.fn=i.bind(t,r);n.on(u.events,u[A],s,u.capture,u.group)}),void(e.cachedElementTriggers=o)):e},undelegateTriggers:function(){var e=this,t=(e.view,e.el),r=e.cachedElementTriggers;return e.cachedElementTriggers&&t?(It(r,function(e){t.off(e.events.join(u),e[A],e.fn)}),e.cachedElementTriggers=n,e):e},setAttributes:function(){var e=this,t=e.view,n=Pn(t,"elementAttributes");return t[X]&&(n=n||{},n[Q]=Pn(t,X)),n&&e.el.attr(n),e},bindUI:function(){var e=this,t=e.uiBindings;return e.ui=e.view.ui=mn(t,e.el.$,e.el),e}});e.defineDirective(E,c[y],function(e,n){e.el.destroy(),e.unset();var r=e.ui;e.degenerateUIBindings(),t.eachCall(r,"destroy")})}),e.scope(function(e){var t=e._,n=t.factories,r=n.Collection,i=(t.protoProp,t.isFragment),u=t.isInstance,a=(t.isFunction,t.isArrayLike,t.reverseParams,t.intendedObject),s=(t.createDocumentFragment,"render"),c=s+"ed",f="constructor",v="bufferedViews",m="RegionManager",y=function(e){return this.list.get(l,e)},w=function(e,t){var n=this;a(e,t,function(e,t){var r=n.list.get(e);r||n.establish(e,t)})},b=n.Parent,x=n.Model,k=function(e,t){return M.isInstance(t)?t:e.Child({model:x.isInstance(t)?t:t=x(t)})},T=function(e,t){var n=e[oi];return t[L]=ye,n.remove(t),e},S=n.Region=b.extend("Region",{constructor:function(e){var t=this;return b[f].call(t,e),t.directive(oi),t.setElement(),t},add:function(e,t){var n=this,i=r(e).each(n.adopt,n).unwrap();return n.el&&n.render(),i},adopt:function(e){var t,n=this,r=n[oi];if(!e)return n;if(t=k(n,e),t[L]){if(t[L]===n)return n;T(t[L],t)}return t[L]=n,r.add(t),n},attach:function(e){var t,n,r=this,i=e.el&&e.el.element();return i?(t=i.parentNode,n=r.directive(v),t&&t===r.el.element()?r:(n.els.appendChild(i),r)):r},setElement:function(){var t,n=this,r=n[A],i=n[L][L];return i!==e?i.is(c)&&(t=i.el.$(r)[ie](0)):t=(n._owner$||$)(r)[ie](0),t?(n.directive(E).set(t),n):n},render:function(){var e=this,t=e.directive(v),n=e.directive(E);return e.unmark(c),t.ensure(),e[ae]("before:"+s),e.setElement(),n.setAttributes(),e[oi].eachCall(s),n.el.append(t.els),e.mark(c),t.reset(),e[ae](s),e}}),D=function(e){var t=Pn(e,"regions"),n=Ht(t)[P]&&e.directive(m).establish(n);return e},C=function(e,t){var n=this;return a(e,t,function(e,t){var r=(r=n.directive(m).get(region_))?r.add(t):Jn({message:"that region does not exist"})}),n},O=function(e,t){var n=this;return a(e,t,function(e,t){var r=(r=n.directive(m).get(region_))?r.remove(t):Jn({message:"that region does not exist"})}),n},M=n.View=S.extend("View",{getRegion:zr.parody(m,"get"),addRegion:zr.parody(m,"add"),removeRegion:zr.parody(m,"remove"),tagName:function(){return"div"},filter:function(){return ve},templateIsElement:function(){return me},template:function(){return o},parentView:function(){for(var e,t=this,n=t[L];e&&n&&!u(n,M);)n=n[L],u(n,M)&&(e=n);return e},addChildView:C,removeChildView:O,constructor:function(e){var t=this;return b[f].call(t,e),t.directive(E).ensure(),this.id=cr(me,ve),D(this),t},valueOf:function(){return this.model.id},destroy:function(e){var t=this;return t.is(p)?t:(t[ae](h),t.mark(p),t[m]&&t[m].list.eachCall(d),t.el&&t.el.destroy(e),t.directiveDestruction(E),b[f][g].destroy.call(t),t)},render:function(){var e,t,n,r,i,o=this,u=!o.is(c);return o.unmark(c),o.filter()?(t=o.directive(E),o[ae]("before:"+s),n=o.model&&o.model.toJSON(),r=o.template(n),i=o.el,o.templateIsElement()&&(i=o.el.owner.fragment(r).children(),r=me),e=i!==t.el,e&&t.unset(),t.degenerateUIBindings(),t.set(i),r!==me&&t.render(r),t.generateUIBindings(),t.bindUI(),(e||u)&&(t.delegateEvents(),t.delegateTriggers()),t.setAttributes(),D(o),o.mark(c),o[ae](s),o[m]&&o[m].list.eachCall(s),t=o[L]&&o[L].attach(o),o):o}}),I=(S[f][g].Child=M,n.View,function(t,n){var r=this,i=r[L];return t?(a(t,n,function(t,n){var o,u=r.list.get(t);u||(u=r.create(t,n)),o=i!==e?i.$(u[A])[ie](0):$(u[A])[ie](0),u.el=o}),r):r}),_=function(e){},N=function(t,n){var r=this,i=r[L],a=n,s=n;return u(s,S)?s:(s=S(pt({selector:a||o},it(s)?s:{},{id:t,parent:r,isAttached:i===e?ve:i.isAttached})),r.list.push(s),r.list.register(l,t,s),s)},R=function(){var e=this;i(e.els)?1:e.resetEls()},j=function(){var e=this.views;return this.resetEls(),e},V=function(){this.els=document.createDocumentFragment()};e.defineDirective(m,function(e){return{list:r(),parent:e,create:N,establish:I,remove:_,add:w,get:y}}),e.defineDirective(v,function(e){return{region:e,els:$.createDocumentFragment(),reset:j,ensure:R,resetEls:V}}),e.extend(Un(Ge("add remove get"),function(e,t){return e[t+"Region"]=zr.parody(m,t),e},{addChildView:C,removeChildView:O})),e.directive(m)}),e.scope(function(e){var t=e._,i=t.factories,u=t.parse,a=t.stringify,s="%7B",c="isLate",f="documentReady",d="isWindow",h="deferred",p="resolved",v="is"+lr(h),m="group",g="postTo",w="command",b="runCount",x="flushing",A="connect",E=A+"ed",k="dis"+E,S="initialize",D="response",C="message",O=lr(D),M="latest"+O,I="last"+O,N="responded",R=N+"With",V="received",B=_+N,H=_+V,q="sentMessageIndex",U="receiveReferrer",F="emitReferrer",W="buster",G="packet",z="version",J={},Q=function(t){var n,r=t.data(),i=r.postTo;if(!e.isDestroyed&&r&&i&&(e[z]===r[z]||"*"===r[z])&&(n=(J[r.group]||{})[r.postTo])){var o,u=r.runCount,a=n.directive(oi);if(u){if(o=a.get(l,r.messageId),!o)return n;n.response(o,r)}else n.receive(r)}},X=function(e,t){var n=a(e);return t.emitWindow.emit(n,t.get(F),Q)},K=_n(),Z="respondHandlers",ee=i.Model.extend(lr(C),{idAttribute:C+"Id",initialize:function(){var e=this;e[Z]=[],e.once(D,e.saveReceived),e.on(h,e.saveDeferred)},saveReceived:function(e){this.responseEventObject=e},saveDeferred:function(e){this.deferredEventObject=e},packet:function(e){var t=this;return arguments[0]?t.set(G,e||{}):t=u(a(t.get(G))),t},defaults:function(){return{command:ye+o,packet:{}}},response:function(e){var t=this;return ze(e)?(t.get(R)?e.call(t,t.responseEventObject):t.once(D,e),t):t},deferred:function(e){var t=this,n=t.get(M);return t.on(h,e),n&&n.isDeferred&&e.call(t,t.deferredEventObject),t},send:function(){return this[L].flush()}}),te={message:Q},ne=function(e){return Ct(J,function(t){return Ct(t,function(t,n,r){return e===t&&delete r[n]})})},re=function(){var e=this;e.connectPromise&&e.connectPromise.reject(),e.unmark(E),e[ae](k),e.connectPromise=t.Promise()},ie=function(e){var t=this,n=t.directive(j);n.get(c)&&n.set(q,1),t.respond((e.message||e.origin).id),t.mark(E),t[ae](E)},oe=lr(W),ue=function(n){return{from:n.get(l),postTo:n.get(g),group:n.get(m),version:e[z],messageId:n.directive(oi)[P](),timeStamp:t.now()}};i[oe]=i.Model.extend(oe,{Child:ee,bounce:function(e){return this.respond(e.message.id)},connected:function(){return this.connectPromise.success(arguments),this},response:function(e,t){var n=e[j];n&&(n.set(M,t),e.is(p)?e[ae](h,t.packet):(n.set(R,t),e.mark(p),e[ae](D,t.packet)))},receive:function(e){var t,n=this,r=n.receiveHistory;return e.originMessageId=e.messageId,e.messageId=r.length(),e.isDeferred=me,t=ee(e),r.push(t),r.register(l,e.messageId,t),n[ae](H),n[ae](V+T+e.command,e.packet,{message:t}),n[ae](V),n},setGroup:function(){var e=this,t=e.get(m),n=e.get(l),r=(ne(e),J[t]=J[t]||{});return r[n]=e,e},defineWindows:function(e,t){var n=this,r=n.directive(j);e&&e[d]&&(n.receiveWindow=e.on(te),n.mark(f),n.flush()),t&&t[d]&&(n.emitWindow=t,r.set(g,r.get(g)||n.emitWindow.address))},defineIframe:function(e){var t,n=this;e&&e.isIframe&&(n[pi]=e,e.is("attached")&&(t=e.window())&&n.defineWindows(ye,t),e&&n.setupIframe())},setupIframe:function(){var e,n=this,r=n[pi],i=n.directive(j),u=n.receiveWindow.element().location.href.split(s),c=(u.shift(),u.unshift(o),u.join(s)),f=Sr(i.get(U)||c).origin,l=i.get(pi+"Src"),d=i.get(pi+"Content"),h={postTo:n.id,useTop:!1,useParent:!0,emitReferrer:f,id:i.get(g),group:i.get(m)};i.set(U,f),l&&(e=i.set(F,t.reference(l)),h.receiveReferrer=e),l&&r.src(Mn({url:l,hash:h})),d&&(r.data(W,encodeURI(a(h))),r.html(d),n.begin(S))},stripData:function(){var e,t,n,r=this,i=r.receiveWindow;i&&i[d]&&(n=i.element().location.hash.slice(1),e=n.split(s),t=e.shift(),e.unshift(o),n=e.join(s),r.set(u(decodeURI(n||Qn(function(){return i.parent(pi).data(W)})))))},constructor:function(e,t,r,o){var u=this,a=r||{},s=$(e).index(0),f=$(t).index(0);return a.id=a.id===n?_n():a.id,u.receiveHistory=i.Collection(),re.call(u),a.group=K,i.Model[y].call(u,a),u.on(E,function(e){u.connectPromise.fulfill(u.directive(oi).first()),u.flush()}),u.on({"received:update":"bounce","received:unload":"destroy",destroy:re,"received:initialize received:connect":ie,"change:group change:id":"setGroup"}),u.on(o),u.setGroup(),s&&s[d]&&u.defineWindows(s),f[d]?u.defineWindows(ye,f):u.defineIframe(f),u.get("strip")&&u.stripData(),u.set(q,0),u[pi]?u.get(c)&&u.begin(S):u.begin(A),u},flush:function(){var e,t,r,i,o=this,u=o.directive(j),a=u.get(q),s=o.is(E),c=u.get("initedFromPartner"),l=u.get(x);if(!o.is(f))return o;if(!c||s&&(s||!a)&&!l){for(u.set(x,ve),t=o.directive(oi),r=t[P](),i=t.index(a);i&&r>a;)i.directive(j).set(b,0),a||s?(i=t.index(a),a=u.get(q)+1||0,u.set(q,a),X(i,o)):(r=n,e=i.get(w),e!==A&&e!==S||X(i,o));o.set(x,me),o.is(E)&&t[P]()>o.get(q)&&o.flush()}return o},create:function(e,t,n){var r=this,i=r.add(pt({command:e,packet:t},ue(r),n));return i[0]},sync:function(e){return this.create("update").response(e).send()},respond:function(e,n){var r,i,o,u=this,a=u.receiveHistory.get(l,e);return a?(u[ae](B),r=a.directive(j),r.set(b,(r.get(b)||0)+1),i=pt(ve,Pn(u,"package")||{},n),o=pt(ue(u),{from:a.get(g),postTo:a.get("from"),messageId:a.get("originMessageId"),isResponse:ve,isDeferred:a.get(v),runCount:a.get(b),command:a.get(w),timeStamp:t.now(),packet:i,version:a.get(z)}),r.set(I,o.timeStamp),r.set(v,ve),u.set(I,o.timeStamp),X(o,u),u[ae](N,i),u):u},begin:function(e){var t=this,n=t.directive(oi);return n.index(0)||t.create(e).response(function(e){ie.call(t,e)}).send()}});e.topAccess()&&$(r[Y]).on(C,Q)}),application.scope().run(function(e,t,n){var r,i,o,a=0,s=me,c="expected",f=" not",l=" to equal ",d=" an error",h=" to be thrown",p=" to be strictly equal to ",v=t.console,m=t.stringify,g=t.negate,y=[],w=[],b=[],x=[],A=[],E=[],k=[],T=[],S=[],D=[],C=function(e,t){return function(n){var r={};return e.call(this,i,n)?k.push(r):(++a,r=new Error(t.apply(this,arguments)),v.error(r),T.push(r)),E.push(r),this}},O={not:{}},M=function(e){return i=e,O},I=M.maker=function(e,t,n,r){O[e]=C(t,n),O.not[e]=C(g(t),r)},_=(I("toThrow",function(e){var n=me;return t.wraptry(e,function(){n=ve},function(){return n})},function(){return c+d+h},function(){return c+d+f+h}),I("toBe",function(e,t){return e===t},function(e,t){return c+u+m(e)+p+m(t)},function(e,t){return c+u+m(e)+f+p+m(t)}),I("toEqual",function(e,n){return t.isEqual(e,n)},function(e,t){return c+u+e+l+t},function(e,t){return c+u+m(e)+f+l+m(t)}),function(e){return function(t){e.erred=t,v.error(t)}}),N=function(e){var n;e.endTime=t.performance.now(),x.pop(),a||e.erred?b.push(e):w.push(e),a=0,B(e.afterStack),s=me,A[0]&&(n=A.shift(),L(n)),U()},R=function(e,n){x.push(e),S.push([]),D.push([]),t.wraptry(n,v.error,function(){D.pop(),S.pop(),x.pop()})},j=function(e){var t=e.toString(),n=t.split("("),r=(n.shift(),n.join("("));n=r.split(")");var i=n.shift();return i.trim().length},L=function(e){s=ve,e.runId=setTimeout(function(){var n,i,o,u,a;r=e,B(e.beforeStack),o=_(e),j(e.handler)?(u=new Error,e.timeoutId=setTimeout(function(){v.error("timeout:\n"+e.current.join("\n")),n(u),N(e)},5e3),i=function(){e.handler(function(){clearTimeout(e.timeoutId),N(e)})},n=o,o=function(t){n(t),N(e)},a=t.noop):(i=e.handler,a=function(){N(e)}),e.startTime=t.performance.now(),t.wraptry(i,o,a)})},V=function(e,t){var n,r;return x.push(e),n=x.slice(0),x.pop(),r={string:e,handler:t,current:n,beforeStack:S.slice(0),afterStack:D.slice(0)},y.push(r),s?void A.push(r):void L(r)},B=function(e){for(var t=0;t<e[P];t++)for(var n=e[t],r=0;r<n[P];r++)n[r]()},H=function(e){S[S[P]-1].push(e)},q=function(e){D[D[P]-1].push(e)},U=function(){o=void 0===o?setTimeout(function e(){var t,n=0,r=0;if(s)o=setTimeout(e,100);else{for(;n<y[P];n++)t=y[n],r+=t.endTime-t.startTime;v.log(k.length+" successful expectations\n"+T.length+" failed expectations\n"+E.length+" expectations ran\n"+w.length+" out of "+y.length+" tests passed\nin "+r+"ms")}},100):o};t.exports({afterEach:q,beforeEach:H,expect:M,describe:R,it:V})})});
//# sourceMappingURL=odette.min.js.map
